import{t as A,e as q,a as b,s as k,c as te}from"../chunks/CEmPIxNJ.js";import"../chunks/By0_FFSG.js";import{h as V,a3 as ae,a8 as z,a9 as se,a5 as D,t as I,a6 as oe,a4 as w,c as u,g as e,o as i,q as s,r as f,aa as re}from"../chunks/DKVBVOUy.js";import{i as F}from"../chunks/DVrbH2wj.js";import{e as ne,i as le}from"../chunks/C6EYMggD.js";import{s as ie}from"../chunks/BnVpz-va.js";import{a as ce}from"../chunks/BQs9fFl7.js";import{i as ve}from"../chunks/DaaNtiuP.js";import{s as pe,a as ue}from"../chunks/CWYHwTbz.js";import{o as fe}from"../chunks/0jm4Ivcg.js";import{p as me}from"../chunks/Bq27H24M.js";import{b as _e}from"../chunks/CLI4ihTo.js";function de(n,M,m,S,E,c){var v=n.__className;if(V||v!==m||v===void 0){var o=ce(m,S);(!V||o!==n.getAttribute("class"))&&(o==null?n.removeAttribute("class"):n.className=o),n.__className=m}return c}var ge=A('<div class="text svelte-1q23yul"> </div>'),be=A('<div><div class="idx svelte-1q23yul"></div> <!></div>'),ye=A('<p class="loading svelte-1q23yul">문장 데이터를 불러오는 중입니다...</p>'),he=A('<!> <div class="controls svelte-1q23yul"><button class="svelte-1q23yul"> </button> <button class="svelte-1q23yul"> </button> <button class="svelte-1q23yul"> </button></div>',1);function Me(n,M){ae(M,!1);const[m,S]=pe(),E=()=>ue(me,"$page",m),c=i(),v=i();let o=i([]),_=i(-1),a=null,d=i(!1),l=i("none"),y=i(!0);fe(async()=>{if(!e(c))return;const t=await fetch(`${e(v)}/sentences.json`);if(t.ok){const r=await t.json();s(o,r.sentences)}});async function g(t){var r;t<0||t>=e(o).length||(s(_,t),await re(),(r=document.getElementById(`s-${t}`))==null||r.scrollIntoView({behavior:"smooth",block:"center"}),a==null||a.pause(),a=new Audio(`${e(v)}/audio/${String(t+1).padStart(2,"0")}.mp3`),a.onended=()=>{e(l)==="one"?g(e(_)):e(_)<e(o).length-1?g(e(_)+1):e(l)==="all"?g(0):s(d,!1)},s(d,!0),a.play())}function G(){a?a.paused?(a.play(),s(d,!0)):(a.pause(),s(d,!1)):g(0)}function H(){s(l,e(l)==="none"?"one":e(l)==="one"?"all":"none")}z(()=>E(),()=>{var t;s(c,((t=E().url.pathname.match(/\/sentence\/([^\/]+)/))==null?void 0:t[1])||"")}),z(()=>e(c),()=>{s(v,`${_e}/assets/sentence/${e(c)}`)}),se(),ve();var T=he(),C=D(T);{var J=t=>{var r=te(),U=D(r);ne(U,1,()=>e(o),le,(W,X,x)=>{var p=be();ie(p,"id",`s-${x}`);var R=u(p);R.textContent=x+1;var Y=w(R,2);{var Z=j=>{var B=ge(),ee=u(B,!0);f(B),I(()=>k(ee,e(X))),b(j,B)};F(Y,j=>{e(y)&&j(Z)})}f(p),I(()=>de(p,1,`sent ${x===e(_)?"active":""}`,"svelte-1q23yul")),q("click",p,()=>g(x)),b(W,p)}),b(t,r)},K=t=>{var r=ye();b(t,r)};F(C,t=>{e(o).length?t(J):t(K,!1)})}var P=w(C,2),h=u(P),L=u(h,!0);f(h);var $=w(h,2),O=u($);f($);var N=w($,2),Q=u(N,!0);f(N),f(P),I(()=>{k(L,e(d)?"⏸":"▶"),k(O,`반복:${e(l)==="none"?"없음":e(l)==="one"?"한 문장":"전체"}`),k(Q,e(y)?"내용 숨김":"내용 표시")}),q("click",h,G),q("click",$,H),q("click",N,()=>s(y,!e(y))),b(n,T),oe(),S()}export{Me as component};
