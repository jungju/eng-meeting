import{t as N,e as A,a as $,s as S,c as Q}from"../chunks/D2y0niO5.js";import"../chunks/D4TFS71g.js";import{h as P,a3 as U,a7 as W,a8 as X,a4 as R,t as T,a5 as Y,c as u,a6 as E,g as e,o as _,q as i,r as d,aa as Z}from"../chunks/BXl0y74R.js";import{i as j}from"../chunks/DM47GmrI.js";import{e as ee,i as te}from"../chunks/B4N4kkHG.js";import{s as se}from"../chunks/BVs_O_Ia.js";import{a as ae}from"../chunks/BQs9fFl7.js";import{i as re}from"../chunks/CDOc-NWU.js";import{s as oe,a as ne}from"../chunks/D_3_62pX.js";import{o as ie}from"../chunks/D_9bqR7V.js";import{p as le}from"../chunks/CGhj4KHC.js";function ce(o,x,f,y,k,l){var v=o.__className;if(P||v!==f||v===void 0){var s=ae(f,y);(!P||s!==o.getAttribute("class"))&&(s==null?o.removeAttribute("class"):o.className=s),o.__className=f}return l}var pe=N('<div><div class="idx svelte-136sr6h"></div><div> </div></div>'),fe=N('<p class="loading svelte-136sr6h">문장 데이터를 불러오는 중입니다...</p>'),ve=N('<!> <div class="ctrls svelte-136sr6h"><button class="svelte-136sr6h"> </button> <button class="svelte-136sr6h"> </button></div>',1);function Ae(o,x){U(x,!1);const[f,y]=oe(),k=()=>ne(le,"$page",f),l=_(),v="/assets/sentence";let s=_([]),c=_(-1),a,g=_(!1),n=_("none");ie(async()=>{if(!e(l))return;const t=await fetch(`${v}/${e(l)}/sentences.json`);if(t.ok){const r=await t.json();i(s,r.sentences)}});async function m(t){var r;t<0||t>=e(s).length||(i(c,t),await Z(),(r=document.getElementById(`s-${t}`))==null||r.scrollIntoView({behavior:"smooth",block:"center"}),a==null||a.pause(),a=new Audio(`${v}/${e(l)}/audio/${String(t+1).padStart(2,"0")}.mp3`),a.play(),i(g,!0),a.onended=()=>{e(n)==="one"?m(e(c)):e(n)==="all"?m((e(c)+1)%e(s).length):e(c)<e(s).length-1?m(e(c)+1):i(g,!1)})}function V(){a?i(g,a.paused?(a.play(),!0):(a.pause(),!1)):e(s).length&&m(0)}function z(){i(n,e(n)==="none"?"one":e(n)==="one"?"all":"none")}W(()=>k(),()=>{i(l,(()=>{const t=k().url.pathname.match(/\/sentence\/([^\/]+)/);return t?t[1]:""})())}),X(),re();var B=ve(),I=R(B);{var D=t=>{var r=Q(),J=R(r);ee(J,1,()=>e(s),te,(K,L,b)=>{var p=pe();se(p,"id",`s-${b}`);var C=u(p);C.textContent=b+1;var M=E(C),O=u(M,!0);d(M),d(p),T(()=>{ce(p,1,`sent ${b===e(c)?"active":""}`,"svelte-136sr6h"),S(O,e(L))}),A("click",p,()=>m(b)),$(K,p)}),$(t,r)},F=t=>{var r=fe();$(t,r)};j(I,t=>{e(s).length?t(D):t(F,!1)})}var q=E(I,2),h=u(q),G=u(h,!0);d(h);var w=E(h,2),H=u(w);d(w),d(q),T(()=>{S(G,e(g)?"⏸️ 일시정지":"▶️ 재생"),S(H,`🔁 반복 모드: ${e(n)==="none"?"없음":e(n)==="one"?"한 문장":"전체"}`)}),A("click",h,V),A("click",w,z),$(o,B),Y(),y()}export{Ae as component};
