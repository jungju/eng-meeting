import{t as z,e as A,a as v,s as m,b as D,c as Dt}from"../chunks/CMrKsAIM.js";import"../chunks/BmGMRanT.js";import{a9 as Et,f as gt,t as y,ad as Gt,s as x,R as E,g as t,a as _,c as i,l,r as c,m as ht}from"../chunks/Btjerwqt.js";import{i as G}from"../chunks/3CCI0ror.js";import{e as J,i as K}from"../chunks/Dg5wf27x.js";import{s as H}from"../chunks/D6txDpE6.js";import{i as Jt}from"../chunks/Bn3qeioi.js";import{o as Kt}from"../chunks/DDGzSC41.js";var Lt=z('<th class="svelte-zlyqog"> </th>'),Nt=z("<td><!></td>"),Ut=z('<tr><td class="svelte-zlyqog"> </td><!></tr>'),Vt=z('<div style="overflow-x:auto"><table class="svelte-zlyqog"><thead><tr><th class="svelte-zlyqog">S</th><!></tr></thead><tbody></tbody></table></div>'),Xt=z('<p style="margin-bottom: 120px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Zt=z("<button> </button>"),te=z('<!> <div class="footer svelte-zlyqog"><button class="info-btn svelte-zlyqog">Info</button> <div style="display:flex; flex-wrap:wrap; gap:5px; justify-content:center;"></div> <div style="display:flex; gap:12px;"><button> </button> <button>Q1</button> <button> </button></div></div>',1);function ie(bt,mt){Et(mt,!1);let at=_([]),O=_([]),L=[],g=_(""),k=_(""),s,n=_(""),q=_(null),h=_({c:0,t:0}),I=null,r=_(null),w=_(!1),b=_(!1),j=0;const yt=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],xt=["I","You","He","We","They"],N=async e=>{const a=await fetch(e);return a.ok?await a.json():[]};Kt(async()=>{l(at,await N("/assets/tense/info.json")),await R("sentences1-1.json")});async function R(e,a){const o=await N(`/assets/tense/${e}`);if(!o.length)return alert(`fail ${e}`);L=await N(`/assets/tense/${e.replace("-1.json","-2.json")}`),l(O,o),l(g,e),l(k,e.replace("sentences","").replace(".json","")),s==null||s.pause(),l(q,null),l(n,""),l(h,{c:0,t:0}),I=null,l(r,null),l(w,!1),l(b,!1)}const kt=e=>(t(w)&&L.length?L:t(O)).slice(e*9,e*9+9);function qt(e){const a=e.replace(/\.$/,"").split(" ");return a.length<3?e:`${a[0]} ${a.slice(1,-1).map(o=>"_".repeat(o.length)).join(" ")} ${a[a.length-1]}`}const wt=e=>{t(n)||!t(k).endsWith("-1")||(s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(k)}-${e+1}.mp3`),l(q,e),s.onended=()=>l(q,null),s.play().catch(()=>{}))};function lt(){if(!t(b)||j>=t(O).length){l(b,!1),l(q,null);return}s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(k)}-${j+1}.mp3`),l(q,j),s.onended=()=>{j++,lt()},s.play().catch(()=>{})}function Pt(){if(t(b)){s==null||s.pause(),l(b,!1),l(q,null);return}t(g).startsWith("tense_info")||t(n)||!t(k).endsWith("-1")||(l(b,!0),j=0,lt())}const zt=()=>{l(n,"blank"),l(r,null)},Wt=()=>{if(t(n)==="guess"){s==null||s.pause(),s&&(s.currentTime=0,s.play().catch(()=>{}));return}l(w,!1),l(n,"guess"),l(h,{c:0,t:0}),nt()};function nt(){l(r,null);const e=Math.floor(Math.random()*5)+1,a=Math.floor(Math.random()*2)+1,o=Math.floor(Math.random()*45)+1;I=o-1,ht(h,t(h).t++),s==null||s.pause(),s=new Audio(`/assets/tense/audio/${e}-${a}-${o}.mp3`),s.play().catch(()=>{})}function Mt(e,a){if(t(n)!=="guess"||I===null)return;const o=Math.floor(I/9),f=I%9,d=e===o&&a===f;d&&ht(h,t(h).c++),l(r,{r:e,c:a,x:d,cr:o,cc:f}),setTimeout(nt,800)}Jt();var ot=te(),rt=gt(ot);{var $t=e=>{var a=Vt(),o=i(a),f=i(o),d=i(f),V=x(i(d));J(V,1,()=>yt,K,(X,Z)=>{var u=Lt(),F=i(u,!0);c(u),y(()=>m(F,t(Z))),v(X,u)}),c(d),c(f);var _t=x(f);J(_t,5,()=>xt,K,(X,Z,u)=>{var F=Ut(),tt=i(F),Ft=i(tt,!0);c(tt);var Qt=x(tt);J(Qt,1,()=>kt(u),K,(Tt,et,P)=>{var Q=Nt();let dt;var Ht=i(Q);{var Ot=p=>{var B=D();y(st=>m(B,st),[()=>qt(t(et))],E),v(p,B)},Rt=(p,B)=>{{var st=M=>{var T=Dt(),Yt=gt(T);{var Bt=$=>{var C=D();y(()=>m(C,t(et))),v($,C)},Ct=$=>{var C=D("?");v($,C)};G(Yt,$=>{t(r)&&!t(r).x&&t(r).cr===u&&t(r).cc===P?$(Bt):$(Ct,!1)})}v(M,T)},St=M=>{var T=D();y(()=>m(T,t(et))),v(M,T)};G(p,M=>{t(n)==="guess"?M(st):M(St,!1)},B)}};G(Ht,p=>{t(n)==="blank"?p(Ot):p(Rt,!1)})}c(Q),y(p=>dt=H(Q,1,"svelte-zlyqog",null,dt,p),[()=>{var p;return{click:!t(n)&&t(k).endsWith("-1"),play:!t(n)&&t(q)===u*9+P,blank:t(n)==="blank",ok:t(n)==="guess"&&((p=t(r))==null?void 0:p.x)&&t(r).r===u&&t(r).c===P,no:t(n)==="guess"&&t(r)&&!t(r).x&&t(r).r===u&&t(r).c===P,ans:t(n)==="guess"&&t(r)&&!t(r).x&&t(r).cr===u&&t(r).cc===P}}],E),A("click",Q,()=>{t(n)?t(n)==="guess"&&Mt(u,P):wt(u*9+P)}),v(Tt,Q)}),c(F),y(()=>m(Ft,t(Z))),v(X,F)}),c(_t),c(o),c(a),v(e,a)},At=e=>{var a=Xt();v(e,a)};G(rt,e=>{t(O).length?e($t):e(At,!1)})}var ct=x(rt,2),it=i(ct),U=x(it,2);J(U,5,()=>t(at),K,(e,a)=>{var o=Zt();let f;var d=i(o,!0);c(o),y(V=>{f=H(o,1,"svelte-zlyqog",null,f,V),m(d,t(a).base)},[()=>({active:!t(n)&&t(g)===t(a).file_en,korean:!t(n)&&t(g)===t(a).file_en&&t(w)})],E),A("click",o,()=>{t(g)===t(a).file_en&&!t(n)?l(w,!t(w)):(l(w,!1),R(t(a).file_en,t(a).base))}),v(e,o)}),c(U);var ut=x(U,2),W=i(ut);let vt;var It=i(W,!0);c(W);var S=x(W,2);let ft;var Y=x(S,2);let pt;var jt=i(Y,!0);c(Y),c(ut),c(ct),y((e,a,o,f,d)=>{W.disabled=e,vt=H(W,1,"svelte-zlyqog",null,vt,a),m(It,t(b)?"⏸":"▶"),S.disabled=o,ft=H(S,1,"svelte-zlyqog",null,ft,f),pt=H(Y,1,"svelte-zlyqog",null,pt,d),m(jt,t(n)==="guess"?`${t(h).c}/${t(h).t}`:"Q2")},[()=>t(g).startsWith("tense_info")||t(n)||!t(k).endsWith("-1"),()=>({active:t(b)}),()=>t(g).startsWith("tense_info"),()=>({active:t(n)==="blank"}),()=>({active:t(n)==="guess"})],E),A("click",it,()=>t(g).startsWith("tense_info1")?R("tense_info2.json"):R("tense_info1.json")),A("click",W,Pt),A("click",S,zt),A("click",Y,Wt),v(bt,ot),Gt()}export{ie as component};
