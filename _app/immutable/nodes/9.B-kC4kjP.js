import{t as z,e as A,a as v,s as m,b as E,c as Et}from"../chunks/DTjkHpgP.js";import"../chunks/DGCDY87e.js";import{a6 as Gt,f as gt,t as y,a9 as Jt,s as x,O as G,g as t,a as _,c as i,e as n,r as c,m as ht}from"../chunks/C1n7QiUv.js";import{i as J}from"../chunks/DxuJ5YGS.js";import{e as K,i as L}from"../chunks/CKqkeeWi.js";import{s as O}from"../chunks/35GQtHY4.js";import{i as Kt}from"../chunks/CRfTq02u.js";import{o as Lt}from"../chunks/Dk0LuR_j.js";var Nt=z('<th class="svelte-zlyqog"> </th>'),Rt=z("<td><!></td>"),Ut=z('<tr><td class="svelte-zlyqog"> </td><!></tr>'),Vt=z('<div style="overflow-x:auto"><table class="svelte-zlyqog"><thead><tr><th class="svelte-zlyqog">S</th><!></tr></thead><tbody></tbody></table></div>'),Xt=z('<p style="margin-bottom: 120px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Zt=z("<button> </button>"),te=z('<!> <div class="footer svelte-zlyqog"><button class="info-btn svelte-zlyqog">Info</button> <div style="display:flex; flex-wrap:wrap; gap:5px; justify-content:center;"></div> <div style="display:flex; gap:12px;"><button> </button> <button>Q1</button> <button> </button></div></div>',1);function ie(bt,mt){Gt(mt,!1);let at=_([]),H=_([]),N=[],g=_(""),k=_(""),s,l=_(""),q=_(null),h=_({c:0,t:0}),I=null,r=_(null),w=_(!1),b=_(!1),j=0;const yt=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],xt=["I","You","He","We","They"],R=async e=>{const a=await fetch(e);return a.ok?await a.json():[]};Lt(async()=>{n(at,await R("/assets/tense/info.json")),await S("sentences1-1.json")});async function S(e,a){const o=await R(`/assets/tense/${e}`);if(!o.length)return alert(`fail ${e}`);N=await R(`/assets/tense/${e.replace("-1.json","-2.json")}`),n(H,o),n(g,e),n(k,e.replace("sentences","").replace(".json","")),s==null||s.pause(),n(q,null),n(l,""),n(h,{c:0,t:0}),I=null,n(r,null),n(w,!1),n(b,!1)}const kt=e=>(t(w)&&N.length?N:t(H)).slice(e*9,e*9+9);function qt(e){const a=e.replace(/\.$/,"").split(" ");return a.length<3?e:`${a[0]} ${a.slice(1,-1).map(o=>"_".repeat(o.length)).join(" ")} ${a[a.length-1]}`}const wt=e=>{t(l)||!t(k).endsWith("-1")||(s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(k)}-${e+1}.mp3`),n(q,e),s.onended=()=>n(q,null),s.play().catch(()=>{}))};function nt(){if(!t(b)||j>=t(H).length){n(b,!1),n(q,null);return}s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(k)}-${j+1}.mp3`),n(q,j),s.onended=()=>{j++,nt()},s.play().catch(()=>{})}function Pt(){if(t(b)){s==null||s.pause(),n(b,!1),n(q,null);return}t(g).startsWith("tense_info")||t(l)||!t(k).endsWith("-1")||(n(b,!0),j=0,nt())}const zt=()=>{n(l,"blank"),n(r,null)},Wt=()=>{if(t(l)==="guess"){s==null||s.pause(),s&&(s.currentTime=0,s.play().catch(()=>{}));return}n(w,!1),n(l,"guess"),n(h,{c:0,t:0}),lt()};function lt(){n(r,null);const e=Math.floor(Math.random()*5)+1,a=Math.floor(Math.random()*2)+1,o=Math.floor(Math.random()*45)+1;I=o-1,ht(h,t(h).t++),s==null||s.pause(),s=new Audio(`/assets/tense/audio/${e}-${a}-${o}.mp3`),s.play().catch(()=>{})}function Mt(e,a){if(t(l)!=="guess"||I===null)return;const o=Math.floor(I/9),f=I%9,d=e===o&&a===f;d&&ht(h,t(h).c++),n(r,{r:e,c:a,x:d,cr:o,cc:f}),setTimeout(lt,800)}Kt();var ot=te(),rt=gt(ot);{var $t=e=>{var a=Vt(),o=i(a),f=i(o),d=i(f),V=x(i(d));K(V,1,()=>yt,L,(X,Z)=>{var u=Nt(),F=i(u,!0);c(u),y(()=>m(F,t(Z))),v(X,u)}),c(d),c(f);var _t=x(f);K(_t,5,()=>xt,L,(X,Z,u)=>{var F=Ut(),tt=i(F),Ft=i(tt,!0);c(tt);var Qt=x(tt);K(Qt,1,()=>kt(u),L,(Tt,et,P)=>{var Q=Rt();let dt;var Ot=i(Q);{var Ht=p=>{var C=E();y(st=>m(C,st),[()=>qt(t(et))],G),v(p,C)},St=(p,C)=>{{var st=M=>{var T=Et(),Bt=gt(T);{var Ct=$=>{var D=E();y(()=>m(D,t(et))),v($,D)},Dt=$=>{var D=E("?");v($,D)};J(Bt,$=>{t(r)&&!t(r).x&&t(r).cr===u&&t(r).cc===P?$(Ct):$(Dt,!1)})}v(M,T)},Yt=M=>{var T=E();y(()=>m(T,t(et))),v(M,T)};J(p,M=>{t(l)==="guess"?M(st):M(Yt,!1)},C)}};J(Ot,p=>{t(l)==="blank"?p(Ht):p(St,!1)})}c(Q),y(p=>dt=O(Q,1,"svelte-zlyqog",null,dt,p),[()=>{var p;return{click:!t(l)&&t(k).endsWith("-1"),play:!t(l)&&t(q)===u*9+P,blank:t(l)==="blank",ok:t(l)==="guess"&&((p=t(r))==null?void 0:p.x)&&t(r).r===u&&t(r).c===P,no:t(l)==="guess"&&t(r)&&!t(r).x&&t(r).r===u&&t(r).c===P,ans:t(l)==="guess"&&t(r)&&!t(r).x&&t(r).cr===u&&t(r).cc===P}}],G),A("click",Q,()=>{t(l)?t(l)==="guess"&&Mt(u,P):wt(u*9+P)}),v(Tt,Q)}),c(F),y(()=>m(Ft,t(Z))),v(X,F)}),c(_t),c(o),c(a),v(e,a)},At=e=>{var a=Xt();v(e,a)};J(rt,e=>{t(H).length?e($t):e(At,!1)})}var ct=x(rt,2),it=i(ct),U=x(it,2);K(U,5,()=>t(at),L,(e,a)=>{var o=Zt();let f;var d=i(o,!0);c(o),y(V=>{f=O(o,1,"svelte-zlyqog",null,f,V),m(d,t(a).base)},[()=>({active:!t(l)&&t(g)===t(a).file_en,korean:!t(l)&&t(g)===t(a).file_en&&t(w)})],G),A("click",o,()=>{t(g)===t(a).file_en&&!t(l)?n(w,!t(w)):(n(w,!1),S(t(a).file_en,t(a).base))}),v(e,o)}),c(U);var ut=x(U,2),W=i(ut);let vt;var It=i(W,!0);c(W);var Y=x(W,2);let ft;var B=x(Y,2);let pt;var jt=i(B,!0);c(B),c(ut),c(ct),y((e,a,o,f,d)=>{W.disabled=e,vt=O(W,1,"svelte-zlyqog",null,vt,a),m(It,t(b)?"⏸":"▶"),Y.disabled=o,ft=O(Y,1,"svelte-zlyqog",null,ft,f),pt=O(B,1,"svelte-zlyqog",null,pt,d),m(jt,t(l)==="guess"?`${t(h).c}/${t(h).t}`:"Q2")},[()=>t(g).startsWith("tense_info")||t(l)||!t(k).endsWith("-1"),()=>({active:t(b)}),()=>t(g).startsWith("tense_info"),()=>({active:t(l)==="blank"}),()=>({active:t(l)==="guess"})],G),A("click",it,()=>t(g).startsWith("tense_info1")?S("tense_info2.json"):S("tense_info1.json")),A("click",W,Pt),A("click",Y,zt),A("click",B,Wt),v(bt,ot),Jt()}export{ie as component};
