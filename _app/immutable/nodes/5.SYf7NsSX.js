import{t as T,e as h,a as j,s as v,c as It}from"../chunks/C84cx4to.js";import"../chunks/Cz3YCu0P.js";import{a9 as Rt,aa as w,ab as Tt,f as ot,t as Q,ac as qt,a as o,s as d,c as i,g as t,l as a,r as n,m as nt,ae as zt,R as it}from"../chunks/CWJw-b4-.js";import{i as Ct}from"../chunks/KPcsEuus.js";import{e as rt,i as lt}from"../chunks/DLP_h01C.js";import{s as Nt}from"../chunks/DmHdXTYY.js";import{s as R}from"../chunks/DMbZqknN.js";import{b as Pt}from"../chunks/CV8ZBm2l.js";import{i as Qt}from"../chunks/VsyBG53z.js";import{s as Vt,a as Ft}from"../chunks/V4_yusMK.js";import{o as Ht,a as Jt}from"../chunks/xR0fCDvz.js";import{p as Ot}from"../chunks/BAfax2en.js";import{b as Ut}from"../chunks/CzxjaotH.js";var Wt=T('<div><div class="line svelte-ypdj6x"><div class="idx svelte-ypdj6x"></div> <div class="content svelte-ypdj6x"><div> </div> <div> </div></div></div></div>'),Xt=T('<p class="loading svelte-ypdj6x">문장 데이터를 불러오는 중입니다...</p>'),Yt=T("<button> </button>"),Zt=T('<div class="list svelte-ypdj6x"><!></div> <div class="controls svelte-ypdj6x"><button> </button> <button> </button> <button> </button> <button> </button> <button> </button> <button> </button> <div class="gap-group svelte-ypdj6x"></div></div> <audio playsinline="" preload="auto" style="display:none"></audio>',1);function pe(ct,dt){Rt(dt,!1);const[ut,vt]=Vt(),V=()=>Ft(Ot,"$page",ut),E=o(),q=o(),F=o(),H=o();let u=o([]),J=o([]),p=o(-1),r=o(),f=o(!1),g=o("none"),M=o(!1),S=o(!1),O=[];const U=[0,1e3,3e3,5e3];let z=o(U[0]),_=o("both"),m=o("eng");Ht(async()=>{if(!t(E))return;const e=await fetch(`${t(q)}/sentences.json`);if(e.ok){const s=await e.json();a(u,s.sentences),a(J,s.korean)}}),Jt(()=>{var e;return(e=t(r))==null?void 0:e.pause()});let y=[];async function $(e){var s;e<0||e>=t(u).length||(a(p,e),await zt(),(s=document.getElementById(`s-${e}`))==null||s.scrollIntoView({behavior:"smooth",block:"center"}),t(m)==="both"?y=["audio","audiok"]:t(m)==="kor"?y=["audiok"]:y=["audio"],await W())}async function W(){if(!y.length){a(f,!1);return}const e=y.shift();t(r).pause(),nt(r,t(r).src=`${t(q)}/${e}/${String(t(p)+1).padStart(2,"0")}.mp3`);try{await t(r).play(),a(f,!0)}catch{a(f,!1)}}function pt(){nt(r,t(r).onended=()=>{setTimeout(async()=>{if(y.length>0){await W();return}t(g)==="one"?$(t(p)):t(p)<t(u).length-1?$(t(p)+1):t(g)==="all"?$(0):a(f,!1)},t(z))})}function ft(){t(f)?t(r).pause():$(t(p)===-1?0:t(p)),a(f,!t(f))}function _t(){a(g,t(g)==="none"?"one":t(g)==="one"?"all":"none")}function mt(){a(M,!t(M))}function bt(){a(m,t(m)==="eng"?"kor":t(m)==="kor"?"both":"eng")}function ht(){a(S,!t(S)),t(S)?(O=[...t(u)],a(u,t(u).map(e=>{const s=e.split(" "),c=s.length,x=c<=2?1:c>=10?3:2,b=[];for(;b.length<x;){const l=Math.floor(Math.random()*c);b.includes(l)||b.push(l)}return b.forEach(l=>s[l]="____"),s.join(" ")}))):a(u,[...O])}function gt(){a(_,t(_)==="both"?"hideKor":t(_)==="hideKor"?"hideEng":"both")}function yt(e){a(z,e)}w(()=>V(),()=>{var e;a(E,((e=V().url.pathname.match(/\/sentence\/([^\/]+)/))==null?void 0:e[1])||"")}),w(()=>t(E),()=>{a(q,`${Ut}/assets/sentence/${t(E)}`)}),w(()=>t(_),()=>{a(F,t(_)==="both"?"한글 숨기기":t(_)==="hideKor"?"영어 숨기기":"기본 보기")}),w(()=>t(m),()=>{a(H,t(m)==="eng"?"영어":t(m)==="kor"?"한국어":"모두")}),w(()=>t(r),()=>{t(r)&&pt()}),Tt(),Qt();var X=Zt(),C=ot(X),xt=i(C);{var kt=e=>{var s=It(),c=ot(s);rt(c,1,()=>t(u),lt,(x,b,l)=>{var k=Wt();Nt(k,"id",`s-${l}`);var Z=i(k),tt=i(Z);tt.textContent=`${l+1}.`;var et=d(tt,2),I=i(et);let at;var Bt=i(I,!0);n(I);var P=d(I,2);let st;var Gt=i(P,!0);n(P),n(et),n(Z),n(k),Q((Lt,Dt)=>{R(k,1,`sent ${l===t(p)?"active":""}`,"svelte-ypdj6x"),at=R(I,1,"text svelte-ypdj6x",null,at,Lt),v(Bt,t(b)),st=R(P,1,"kor svelte-ypdj6x",null,st,Dt),v(Gt,t(J)[l])},[()=>({large:t(M),hidden:t(_)==="hideEng"}),()=>({hidden:t(_)==="hideKor"})],it),h("click",k,()=>$(l)),j(x,k)}),j(e,s)},$t=e=>{var s=Xt();j(e,s)};Ct(xt,e=>{t(u).length?e(kt):e($t,!1)})}n(C);var N=d(C,2),K=i(N),jt=i(K,!0);n(K);var A=d(K,2),wt=i(A);n(A);var B=d(A,2),Et=i(B,!0);n(B);var G=d(B,2),Mt=i(G,!0);n(G);var L=d(G,2),St=i(L,!0);n(L);var D=d(L,2),Kt=i(D);n(D);var Y=d(D,2);rt(Y,5,()=>U,lt,(e,s)=>{var c=Yt();let x;var b=i(c,!0);n(c),Q(l=>{x=R(c,1,"svelte-ypdj6x",null,x,l),v(b,t(s)===0?"즉시":`${t(s)/1e3}초`)},[()=>({selected:t(z)===t(s)})],it),h("click",c,()=>yt(t(s))),j(e,c)}),n(Y),n(N);var At=d(N,2);Pt(At,e=>a(r,e),()=>t(r)),Q(()=>{v(jt,t(f)?"⏸":"▶"),v(wt,`반복:${t(g)==="none"?"없음":t(g)==="one"?"한 문장":"전체"}`),v(Et,t(M)?"기본크기":"글자 크게"),v(Mt,t(F)),v(St,t(S)?"원문 보기":"빈칸 만들기"),v(Kt,`음성:${t(H)??""}`)}),h("click",K,ft),h("click",A,_t),h("click",B,mt),h("click",G,gt),h("click",L,ht),h("click",D,bt),j(ct,X),qt(),vt()}export{pe as component};
