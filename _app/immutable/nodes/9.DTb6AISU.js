import"../chunks/NZTpNUN0.js";import{i as St}from"../chunks/tEBiHiVF.js";import{q as Yt,u as P,G as gt,A as m,K as A,v,w as Dt,z as y,B as S,g as t,y as i,C as x,s as a,m as d,x as c,M as ht,O as Y,J as Et}from"../chunks/CwV636Gc.js";import{i as D}from"../chunks/BpFCBlOt.js";import{e as E,s as O,i as L}from"../chunks/lfAz8Y32.js";import{o as Lt}from"../chunks/Dcbe9JOZ.js";var Nt=P('<th class="svelte-zlyqog"> </th>'),Rt=P("<td><!></td>"),Ut=P('<tr><td class="svelte-zlyqog"> </td><!></tr>'),Vt=P('<div style="overflow-x:auto"><table class="svelte-zlyqog"><thead><tr><th class="svelte-zlyqog">S</th><!></tr></thead><tbody></tbody></table></div>'),Xt=P('<p style="margin-bottom: 120px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Zt=P("<button> </button>"),te=P('<!> <div class="footer svelte-zlyqog"><button class="info-btn svelte-zlyqog">Info</button> <div style="display:flex; flex-wrap:wrap; gap:5px; justify-content:center;"></div> <div style="display:flex; gap:12px;"><button> </button> <button>Q1</button> <button> </button></div></div>',1);function re(bt,mt){Yt(mt,!1);let at=d([]),B=d([]),N=[],_=d(""),k=d(""),r,n=d(""),q=d(null),g=d({c:0,t:0}),I=null,o=d(null),w=d(!1),h=d(!1),j=0;const yt=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],xt=["I","You","He","We","They"],R=async e=>{const s=await fetch(e);return s.ok?await s.json():[]};Lt(async()=>{a(at,await R("/assets/tense/info.json")),await C("sentences1-1.json")});async function C(e,s){const l=await R(`/assets/tense/${e}`);if(!l.length)return alert(`fail ${e}`);N=await R(`/assets/tense/${e.replace("-1.json","-2.json")}`),a(B,l),a(_,e),a(k,e.replace("sentences","").replace(".json","")),r?.pause(),a(q,null),a(n,""),a(g,{c:0,t:0}),I=null,a(o,null),a(w,!1),a(h,!1)}const kt=e=>(t(w)&&N.length?N:t(B)).slice(e*9,e*9+9);function qt(e){const s=e.replace(/\.$/,"").split(" ");return s.length<3?e:`${s[0]} ${s.slice(1,-1).map(l=>"_".repeat(l.length)).join(" ")} ${s[s.length-1]}`}const wt=e=>{t(n)||!t(k).endsWith("-1")||(r?.pause(),r=new Audio(`/assets/tense/audio/${t(k)}-${e+1}.mp3`),a(q,e),r.onended=()=>a(q,null),r.play().catch(()=>{}))};function nt(){if(!t(h)||j>=t(B).length){a(h,!1),a(q,null);return}r?.pause(),r=new Audio(`/assets/tense/audio/${t(k)}-${j+1}.mp3`),a(q,j),r.onended=()=>{j++,nt()},r.play().catch(()=>{})}function zt(){if(t(h)){r?.pause(),a(h,!1),a(q,null);return}t(_).startsWith("tense_info")||t(n)||!t(k).endsWith("-1")||(a(h,!0),j=0,nt())}const Pt=()=>{a(n,"blank"),a(o,null)},Mt=()=>{if(t(n)==="guess"){r?.pause(),r&&(r.currentTime=0,r.play().catch(()=>{}));return}a(w,!1),a(n,"guess"),a(g,{c:0,t:0}),lt()};function lt(){a(o,null);const e=Math.floor(Math.random()*5)+1,s=Math.floor(Math.random()*2)+1,l=Math.floor(Math.random()*45)+1;I=l-1,ht(g,t(g).t++),r?.pause(),r=new Audio(`/assets/tense/audio/${e}-${s}-${l}.mp3`),r.play().catch(()=>{})}function Wt(e,s){if(t(n)!=="guess"||I===null)return;const l=Math.floor(I/9),f=I%9,p=e===l&&s===f;p&&ht(g,t(g).c++),a(o,{r:e,c:s,x:p,cr:l,cc:f}),setTimeout(lt,800)}St();var ot=te(),rt=gt(ot);{var $t=e=>{var s=Vt(),l=i(s),f=i(l),p=i(f),V=y(i(p));E(V,1,()=>yt,L,(X,Z)=>{var u=Nt(),F=i(u,!0);c(u),m(()=>x(F,t(Z))),v(X,u)}),c(p),c(f);var pt=y(f);E(pt,5,()=>xt,L,(X,Z,u)=>{var F=Ut(),tt=i(F),Ft=i(tt,!0);c(tt);var Qt=y(tt);E(Qt,1,()=>kt(u),L,(Tt,et,z)=>{var Q=Rt();let _t;var Ot=i(Q);{var Bt=b=>{var J=Y();m(st=>x(J,st),[()=>qt(t(et))],S),v(b,J)},Ct=(b,J)=>{{var st=W=>{var T=Et(),Ht=gt(T);{var Jt=$=>{var K=Y();m(()=>x(K,t(et))),v($,K)},Kt=$=>{var K=Y("?");v($,K)};D(Ht,$=>{t(o)&&!t(o).x&&t(o).cr===u&&t(o).cc===z?$(Jt):$(Kt,!1)})}v(W,T)},Gt=W=>{var T=Y();m(()=>x(T,t(et))),v(W,T)};D(b,W=>{t(n)==="guess"?W(st):W(Gt,!1)},J)}};D(Ot,b=>{t(n)==="blank"?b(Bt):b(Ct,!1)})}c(Q),m(b=>_t=O(Q,1,"svelte-zlyqog",null,_t,b),[()=>({click:!t(n)&&t(k).endsWith("-1"),play:!t(n)&&t(q)===u*9+z,blank:t(n)==="blank",ok:t(n)==="guess"&&t(o)?.x&&t(o).r===u&&t(o).c===z,no:t(n)==="guess"&&t(o)&&!t(o).x&&t(o).r===u&&t(o).c===z,ans:t(n)==="guess"&&t(o)&&!t(o).x&&t(o).cr===u&&t(o).cc===z})],S),A("click",Q,()=>{t(n)?t(n)==="guess"&&Wt(u,z):wt(u*9+z)}),v(Tt,Q)}),c(F),m(()=>x(Ft,t(Z))),v(X,F)}),c(pt),c(l),c(s),v(e,s)},At=e=>{var s=Xt();v(e,s)};D(rt,e=>{t(B).length?e($t):e(At,!1)})}var ct=y(rt,2),it=i(ct),U=y(it,2);E(U,5,()=>t(at),L,(e,s)=>{var l=Zt();let f;var p=i(l,!0);c(l),m(V=>{f=O(l,1,"svelte-zlyqog",null,f,V),x(p,t(s).base)},[()=>({active:!t(n)&&t(_)===t(s).file_en,korean:!t(n)&&t(_)===t(s).file_en&&t(w)})],S),A("click",l,()=>{t(_)===t(s).file_en&&!t(n)?a(w,!t(w)):(a(w,!1),C(t(s).file_en,t(s).base))}),v(e,l)}),c(U);var ut=y(U,2),M=i(ut);let vt;var It=i(M,!0);c(M);var G=y(M,2);let ft;var H=y(G,2);let dt;var jt=i(H,!0);c(H),c(ut),c(ct),m((e,s,l,f,p)=>{M.disabled=e,vt=O(M,1,"svelte-zlyqog",null,vt,s),x(It,t(h)?"⏸":"▶"),G.disabled=l,ft=O(G,1,"svelte-zlyqog",null,ft,f),dt=O(H,1,"svelte-zlyqog",null,dt,p),x(jt,t(n)==="guess"?`${t(g).c}/${t(g).t}`:"Q2")},[()=>t(_).startsWith("tense_info")||t(n)||!t(k).endsWith("-1"),()=>({active:t(h)}),()=>t(_).startsWith("tense_info"),()=>({active:t(n)==="blank"}),()=>({active:t(n)==="guess"})],S),A("click",it,()=>t(_).startsWith("tense_info1")?C("tense_info2.json"):C("tense_info1.json")),A("click",M,zt),A("click",G,Pt),A("click",H,Mt),v(bt,ot),Dt()}export{re as component};
