import{t as k,e as M,a as _,s as y,c as xe}from"../chunks/CMrKsAIM.js";import"../chunks/BmGMRanT.js";import{a9 as ye,g as e,m as Y,l as a,aa as ke,a as n,ab as F,ac as we,f as Z,t as R,ad as $e,ae as Ie,af as Se,s as g,c as i,r as o,R as Ee}from"../chunks/Btjerwqt.js";import{i as N}from"../chunks/3CCI0ror.js";import{e as Me,i as Re}from"../chunks/Dg5wf27x.js";import{s as ee}from"../chunks/BZm7i61A.js";import{b as je}from"../chunks/D-3x-aaD.js";import{i as ze}from"../chunks/Bn3qeioi.js";import{s as Ae,a as Ne}from"../chunks/Bqr_BXZZ.js";import{o as Te,a as qe}from"../chunks/DDGzSC41.js";import{p as Be}from"../chunks/Cd0sLdMw.js";import{b as Ce}from"../chunks/CeGwWMwr.js";var De=k('<div class="remain-big svelte-mt642f"> </div>'),Ge=k('<p class="eng svelte-mt642f"> </p>'),We=k('<p class="kor svelte-mt642f"> </p>'),Xe=k('<p class="placeholder svelte-mt642f">•••</p>'),Fe=k("<button> </button>"),He=k('<main class="wrapper svelte-mt642f"><div><div class="order-big svelte-mt642f"> </div> <!> <!></div> <button class="next-btn svelte-mt642f">NEXT ⏭</button></main> <div class="controls svelte-mt642f"><button class="svelte-mt642f">⏹ 멈춤</button> <button class="svelte-mt642f"> </button> <div class="gap-group svelte-mt642f"></div></div> <audio playsinline="" preload="auto" class="svelte-mt642f"></audio>',1);function at(te,ae){ye(ae,!1);const[se,re]=Ae(),H=()=>Ne(Be,"$page",se),T=n(),q=n();let b=n([]),J=n([]),c=n(-1),B=n(0),r=n(),h=n(!1),f=n(!1),u=!1,m=n("none"),K=[1e4,2e4,-1],w=n(K[0]),v=n(0),d,$=new Set;Te(async()=>{const t=await fetch(`${e(q)}/sentences.json`);if(t.ok){const s=await t.json();a(b,s.sentences),a(J,s.korean)}}),qe(()=>{var t;(t=e(r))==null||t.pause(),clearInterval(d)});function ne(){if($.size===e(b).length)return-1;let t;do t=Math.floor(Math.random()*e(b).length);while($.has(t));return t}async function L(t,s=!0){if(!(t<0||t>=e(b).length)){s&&Ie(B),a(c,t),$.add(t),await Se(),e(r).pause(),Y(r,e(r).src=`${e(q)}/audio/${String(t+1).padStart(2,"0")}.mp3`);try{await e(r).play()}catch{u=!0;return}a(h,!0)}}O();function O(){e(r)&&Y(r,e(r).onended=()=>{a(h,!1),u?(u=!1,j()):e(w)>0&&$.size<e(b).length&&oe()})}function oe(){a(f,!0),a(v,Math.ceil(e(w)/1e3)),d=setInterval(()=>{ke(v,-1)<=0&&(clearInterval(d),a(f,!1),e(h)?u=!0:j())},1e3)}function j(){e(r).pause(),clearInterval(d),a(h,a(f,u=!1)),a(v,0);const t=ne();t!==-1&&L(t)}function le(){e(c)===-1?j():(e(r).pause(),clearInterval(d),a(f,u=!1),a(v,0),L(e(c),!1))}function ie(){e(r).pause(),clearInterval(d),a(h,a(f,u=!1)),a(c,-1),a(B,0),a(v,0),$.clear()}function ce(){a(m,e(m)==="none"?"eng":e(m)==="eng"?"kor":"none")}function fe(t){a(w,t),e(f)&&(clearInterval(d),a(f,!1),a(v,0))}F(()=>H(),()=>{a(T,H().params.id)}),F(()=>e(T),()=>{a(q,`${Ce}/assets/sentence/${e(T)}`)}),F(()=>e(r),()=>{e(r)&&O()}),we(),ze();var P=He(),C=Z(P),I=i(C),D=i(I),ve=i(D,!0);o(D);var Q=g(D,2);{var pe=t=>{var s=De(),l=i(s,!0);o(s),R(()=>y(l,e(v))),_(t,s)};N(Q,t=>{e(w)>=0&&e(v)>0&&t(pe)})}var ue=g(Q,2);{var me=t=>{var s=xe(),l=Z(s);{var A=p=>{var S=Ge(),X=i(S,!0);o(S),R(()=>y(X,e(b)[e(c)])),_(p,S)},W=(p,S)=>{{var X=x=>{var E=We(),he=i(E,!0);o(E),R(()=>y(he,e(J)[e(c)])),_(x,E)},be=x=>{var E=Xe();_(x,E)};N(p,x=>{e(m)==="kor"?x(X):x(be,!1)},S)}};N(l,p=>{e(m)==="eng"?p(A):p(W,!1)})}_(t,s)};N(ue,t=>{e(c)!==-1&&t(me)})}o(I);var de=g(I,2);o(C);var G=g(C,2),U=i(G),z=g(U,2),_e=i(z,!0);o(z);var V=g(z,2);Me(V,5,()=>K,Re,(t,s)=>{var l=Fe();let A;var W=i(l,!0);o(l),R(p=>{A=ee(l,1,"svelte-mt642f",null,A,p),y(W,e(s)<0?"시간 제한 없음":`${e(s)/1e3}s`)},[()=>({selected:e(w)===e(s)})],Ee),M("click",l,()=>fe(e(s))),_(t,l)}),o(V),o(G);var ge=g(G,2);je(ge,t=>a(r,t),()=>e(r)),R(()=>{ee(I,1,`sentence-box ${e(h)||e(f)?"playing":""}`,"svelte-mt642f"),y(ve,e(c)===-1?"Ready":`#${e(B)}`),y(_e,e(m)==="none"?"표시:없음":e(m)==="eng"?"표시:영어":"표시:한글")}),M("click",I,le),M("click",de,j),M("click",U,ie),M("click",z,ce),_(te,P),$e(),re()}export{at as component};
