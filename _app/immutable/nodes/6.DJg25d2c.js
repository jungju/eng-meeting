import{t as M,e as A,a as v,s as m,b as E,c as Et}from"../chunks/COMqp8kh.js";import"../chunks/DwxwvPS7.js";import{a3 as Gt,a6 as dt,t as k,a7 as Jt,a8 as x,I as G,g as t,c as i,s as n,m as h,r as c,ab as gt}from"../chunks/BkdumivH.js";import{i as J}from"../chunks/CiZIvcdN.js";import{e as K,i as L}from"../chunks/BTCzXXE8.js";import{s as O}from"../chunks/C9c2cQCK.js";import{i as Kt}from"../chunks/CzMeScZB.js";import{o as Lt}from"../chunks/DiGSb2uk.js";var Nt=M('<th class="svelte-gohk3"> </th>'),Rt=M("<td><!></td>"),Ut=M('<tr><td class="svelte-gohk3"> </td><!></tr>'),Vt=M('<div style="overflow-x:auto"><table class="svelte-gohk3"><thead><tr><th class="svelte-gohk3">S</th><!></tr></thead><tbody></tbody></table></div>'),Xt=M('<p style="margin-bottom: 120px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Zt=M("<button> </button>"),te=M('<!> <div class="footer svelte-gohk3"><button class="info-btn svelte-gohk3">Info</button> <div style="display:flex; flex-wrap:wrap; gap:5px; justify-content:center;"></div> <div style="display:flex; gap:12px;"><button> </button> <button>Q1</button> <button> </button></div></div>',1);function ie(bt,mt){Gt(mt,!1);let at=h([]),S=h([]),N=[],d=h(""),y=h(""),s,l=h(""),w=h(null),g=h({c:0,t:0}),j=null,r=h(null),P=h(!1),b=h(!1),F=0;const kt=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],xt=["I","You","He","We","They"],R=async e=>{const a=await fetch(e);return a.ok?await a.json():[]};Lt(async()=>{n(at,await R("/assets/tense/info.json")),await Y("sentences1-1.json")});async function Y(e,a){const o=await R(`/assets/tense/${e}`);if(!o.length)return alert(`fail ${e}`);N=await R(`/assets/tense/${e.replace("-1.json","-2.json")}`),n(S,o),n(d,e),n(y,e.replace("sentences","").replace(".json","")),s==null||s.pause(),n(w,null),n(l,""),n(g,{c:0,t:0}),j=null,n(r,null),n(P,!1),n(b,!1)}const yt=e=>(t(P)&&N.length?N:t(S)).slice(e*9,e*9+9);function wt(e){const a=e.replace(/\.$/,"").split(" ");return a.length<3?e:`${a[0]} ${a.slice(1,-1).map(o=>"_".repeat(o.length)).join(" ")} ${a[a.length-1]}`}const Pt=e=>{t(l)||!t(y).endsWith("-1")||(s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(y)}-${e+1}.mp3`),n(w,e),s.onended=()=>n(w,null),s.play().catch(()=>{}))};function nt(){if(!t(b)||F>=t(S).length){n(b,!1),n(w,null);return}s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(y)}-${F+1}.mp3`),n(w,F),s.onended=()=>{F++,nt()},s.play().catch(()=>{})}function Wt(){if(t(b)){s==null||s.pause(),n(b,!1),n(w,null);return}t(d).startsWith("tense_info")||t(l)||!t(y).endsWith("-1")||(n(b,!0),F=0,nt())}const Mt=()=>{n(l,"blank"),n(r,null)},$t=()=>{if(t(l)==="guess"){s==null||s.pause(),s&&(s.currentTime=0,s.play().catch(()=>{}));return}n(P,!1),n(l,"guess"),n(g,{c:0,t:0}),lt()};function lt(){n(r,null);const e=Math.floor(Math.random()*5)+1,a=Math.floor(Math.random()*2)+1,o=Math.floor(Math.random()*45)+1;j=o-1,gt(g,t(g).t++),s==null||s.pause(),s=new Audio(`/assets/tense/audio/${e}-${a}-${o}.mp3`),s.play().catch(()=>{})}function It(e,a){if(t(l)!=="guess"||j===null)return;const o=Math.floor(j/9),f=j%9,_=e===o&&a===f;_&&gt(g,t(g).c++),n(r,{r:e,c:a,x:_,cr:o,cc:f}),setTimeout(lt,800)}Kt();var ot=te(),rt=dt(ot);{var qt=e=>{var a=Vt(),o=i(a),f=i(o),_=i(f),V=x(i(_));K(V,1,()=>kt,L,(X,Z)=>{var u=Nt(),Q=i(u,!0);c(u),k(()=>m(Q,t(Z))),v(X,u)}),c(_),c(f);var ht=x(f);K(ht,5,()=>xt,L,(X,Z,u)=>{var Q=Ut(),tt=i(Q),Qt=i(tt,!0);c(tt);var Tt=x(tt);K(Tt,1,()=>yt(u),L,(Ht,et,W)=>{var T=Rt();let _t;var Ot=i(T);{var St=p=>{var C=E();k(st=>m(C,st),[()=>wt(t(et))],G),v(p,C)},Yt=(p,C)=>{{var st=I=>{var H=Et(),Bt=dt(H);{var Ct=q=>{var D=E();k(()=>m(D,t(et))),v(q,D)},Dt=q=>{var D=E("?");v(q,D)};J(Bt,q=>{t(r)&&!t(r).x&&t(r).cr===u&&t(r).cc===W?q(Ct):q(Dt,!1)})}v(I,H)},zt=I=>{var H=E();k(()=>m(H,t(et))),v(I,H)};J(p,I=>{t(l)==="guess"?I(st):I(zt,!1)},C)}};J(Ot,p=>{t(l)==="blank"?p(St):p(Yt,!1)})}c(T),k(p=>_t=O(T,1,"svelte-gohk3",null,_t,p),[()=>{var p;return{click:!t(l)&&t(y).endsWith("-1"),play:!t(l)&&t(w)===u*9+W,blank:t(l)==="blank",ok:t(l)==="guess"&&((p=t(r))==null?void 0:p.x)&&t(r).r===u&&t(r).c===W,no:t(l)==="guess"&&t(r)&&!t(r).x&&t(r).r===u&&t(r).c===W,ans:t(l)==="guess"&&t(r)&&!t(r).x&&t(r).cr===u&&t(r).cc===W}}],G),A("click",T,()=>{t(l)?t(l)==="guess"&&It(u,W):Pt(u*9+W)}),v(Ht,T)}),c(Q),k(()=>m(Qt,t(Z))),v(X,Q)}),c(ht),c(o),c(a),v(e,a)},At=e=>{var a=Xt();v(e,a)};J(rt,e=>{t(S).length?e(qt):e(At,!1)})}var ct=x(rt,2),it=i(ct),U=x(it,2);K(U,5,()=>t(at),L,(e,a)=>{var o=Zt();let f;var _=i(o,!0);c(o),k(V=>{f=O(o,1,"svelte-gohk3",null,f,V),m(_,t(a).base)},[()=>({active:!t(l)&&t(d)===t(a).file_en,korean:!t(l)&&t(d)===t(a).file_en&&t(P)})],G),A("click",o,()=>{t(d)===t(a).file_en&&!t(l)?n(P,!t(P)):(n(P,!1),Y(t(a).file_en,t(a).base))}),v(e,o)}),c(U);var ut=x(U,2),$=i(ut);let vt;var jt=i($,!0);c($);var z=x($,2);let ft;var B=x(z,2);let pt;var Ft=i(B,!0);c(B),c(ut),c(ct),k((e,a,o,f,_)=>{$.disabled=e,vt=O($,1,"svelte-gohk3",null,vt,a),m(jt,t(b)?"⏸":"▶"),z.disabled=o,ft=O(z,1,"svelte-gohk3",null,ft,f),pt=O(B,1,"svelte-gohk3",null,pt,_),m(Ft,t(l)==="guess"?`${t(g).c}/${t(g).t}`:"Q2")},[()=>t(d).startsWith("tense_info")||t(l)||!t(y).endsWith("-1"),()=>({active:t(b)}),()=>t(d).startsWith("tense_info"),()=>({active:t(l)==="blank"}),()=>({active:t(l)==="guess"})],G),A("click",it,()=>t(d).startsWith("tense_info1")?Y("tense_info2.json"):Y("tense_info1.json")),A("click",$,Wt),A("click",z,Mt),A("click",B,$t),v(bt,ot),Jt()}export{ie as component};
