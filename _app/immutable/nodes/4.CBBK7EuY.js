import{t as N,e as A,a as $,s as S,c as Q}from"../chunks/DUxGASJm.js";import"../chunks/DX_I1LvE.js";import{h as R,a3 as U,a7 as W,a8 as X,a4 as T,t as V,a5 as Y,c as u,a6 as E,g as e,m as _,s as i,r as d,a9 as Z}from"../chunks/CmuIngUP.js";import{i as j}from"../chunks/bw1FrMkY.js";import{e as ee,i as te}from"../chunks/C_5jZkZv.js";import{s as se}from"../chunks/Bz4HwDwR.js";import{a as ae}from"../chunks/BQs9fFl7.js";import{i as re}from"../chunks/Gu067PdZ.js";import{s as oe,a as ne}from"../chunks/R9PtI5Ub.js";import{o as ie}from"../chunks/BvDnhw93.js";import{p as le}from"../chunks/DHYdHODX.js";import{b as ce}from"../chunks/RAQ4RqVW.js";function pe(o,x,f,y,k,l){var v=o.__className;if(R||v!==f||v===void 0){var s=ae(f,y);(!R||s!==o.getAttribute("class"))&&(s==null?o.removeAttribute("class"):o.className=s),o.__className=f}return l}var fe=N('<div><div class="idx svelte-136sr6h"></div><div> </div></div>'),ve=N('<p class="loading svelte-136sr6h">문장 데이터를 불러오는 중입니다...</p>'),me=N('<!> <div class="ctrls svelte-136sr6h"><button class="svelte-136sr6h"> </button> <button class="svelte-136sr6h"> </button></div>',1);function Ee(o,x){U(x,!1);const[f,y]=oe(),k=()=>ne(le,"$page",f),l=_(),v=`${ce}/assets/sentence`;let s=_([]),c=_(-1),a,g=_(!1),n=_("none");ie(async()=>{if(!e(l))return;const t=await fetch(`${v}/${e(l)}/sentences.json`);if(t.ok){const r=await t.json();i(s,r.sentences)}});async function m(t){var r;t<0||t>=e(s).length||(i(c,t),await Z(),(r=document.getElementById(`s-${t}`))==null||r.scrollIntoView({behavior:"smooth",block:"center"}),a==null||a.pause(),a=new Audio(`${v}/${e(l)}/audio/${String(t+1).padStart(2,"0")}.mp3`),a.play(),i(g,!0),a.onended=()=>{e(n)==="one"?m(e(c)):e(n)==="all"?m((e(c)+1)%e(s).length):e(c)<e(s).length-1?m(e(c)+1):i(g,!1)})}function q(){a?i(g,a.paused?(a.play(),!0):(a.pause(),!1)):e(s).length&&m(0)}function z(){i(n,e(n)==="none"?"one":e(n)==="one"?"all":"none")}W(()=>k(),()=>{i(l,(()=>{const t=k().url.pathname.match(/\/sentence\/([^\/]+)/);return t?t[1]:""})())}),X(),re();var B=me(),I=T(B);{var D=t=>{var r=Q(),J=T(r);ee(J,1,()=>e(s),te,(K,L,b)=>{var p=fe();se(p,"id",`s-${b}`);var M=u(p);M.textContent=b+1;var P=E(M),O=u(P,!0);d(P),d(p),V(()=>{pe(p,1,`sent ${b===e(c)?"active":""}`,"svelte-136sr6h"),S(O,e(L))}),A("click",p,()=>m(b)),$(K,p)}),$(t,r)},F=t=>{var r=ve();$(t,r)};j(I,t=>{e(s).length?t(D):t(F,!1)})}var C=E(I,2),h=u(C),G=u(h,!0);d(h);var w=E(h,2),H=u(w);d(w),d(C),V(()=>{S(G,e(g)?"⏸️ 일시정지":"▶️ 재생"),S(H,`🔁 반복 모드: ${e(n)==="none"?"없음":e(n)==="one"?"한 문장":"전체"}`)}),A("click",h,q),A("click",w,z),$(o,B),Y(),y()}export{Ee as component};
