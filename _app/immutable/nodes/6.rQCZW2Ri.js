import{t as W,e as q,a as u,s as g,b as E,c as Et}from"../chunks/COMqp8kh.js";import"../chunks/DwxwvPS7.js";import{a3 as Gt,a6 as ht,t as x,a7 as Jt,a8 as k,I as G,g as t,c as i,s as n,m as _,r as c,ab as bt}from"../chunks/BkdumivH.js";import{i as J}from"../chunks/CiZIvcdN.js";import{e as K,i as L}from"../chunks/BTCzXXE8.js";import{s as O}from"../chunks/C9c2cQCK.js";import{i as Kt}from"../chunks/CzMeScZB.js";import{o as Lt}from"../chunks/DiGSb2uk.js";var Nt=W('<th class="svelte-14fnfjt"> </th>'),Rt=W("<td><!></td>"),Ut=W('<tr><td class="svelte-14fnfjt"> </td><!></tr>'),Vt=W('<div style="overflow-x:auto"><table class="svelte-14fnfjt"><thead><tr><th class="svelte-14fnfjt">S</th><!></tr></thead><tbody></tbody></table></div>'),Xt=W('<p style="margin-bottom: 120px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Zt=W("<button> </button>"),te=W('<!> <div class="footer svelte-14fnfjt"><button class="info-btn svelte-14fnfjt">Info</button> <div style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center;"></div> <div style="display:flex; gap:12px;"><button> </button> <button>Q1</button> <button> </button></div></div>',1);function ie(mt,gt){Gt(gt,!1);let at=_([]),S=_([]),N=[],h=_(""),y=_(""),s,l=_(""),j=_(null),b=_({c:0,t:0}),A=null,o=_(null),w=_(!1),m=_(!1),F=0;const xt=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],kt=["I","You","He","We","They"],R=async e=>{const a=await fetch(e);return a.ok?await a.json():[]};Lt(async()=>{n(at,await R("/assets/tense/info.json")),await Y("sentences1-1.json")});async function Y(e,a){const r=await R(`/assets/tense/${e}`);if(!r.length)return alert(`fail ${e}`);N=await R(`/assets/tense/${e.replace("-1.json","-2.json")}`),n(S,r),n(h,e),n(y,e.replace("sentences","").replace(".json","")),s==null||s.pause(),n(j,null),n(l,""),n(b,{c:0,t:0}),A=null,n(o,null),n(w,!1),n(m,!1)}const yt=e=>(t(w)&&N.length?N:t(S)).slice(e*9,e*9+9);function jt(e){const a=e.replace(/\.$/,"").split(" ");return a.length<3?e:`${a[0]} ${a.slice(1,-1).map(r=>"_".repeat(r.length)).join(" ")} ${a[a.length-1]}`}const wt=e=>{t(l)||!t(y).endsWith("-1")||(s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(y)}-${e+1}.mp3`),n(j,e),s.onended=()=>n(j,null),s.play().catch(()=>{}))};function nt(){if(!t(m)||F>=t(S).length){n(m,!1),n(j,null);return}s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(y)}-${F+1}.mp3`),n(j,F),s.onended=()=>{F++,nt()},s.play().catch(()=>{})}function Pt(){if(t(m)){s==null||s.pause(),n(m,!1),n(j,null);return}t(h).startsWith("tense_info")||t(l)||!t(y).endsWith("-1")||(n(m,!0),F=0,nt())}const Wt=()=>{n(l,"blank"),n(o,null)},Mt=()=>{if(t(l)==="guess"){s==null||s.pause(),s&&(s.currentTime=0,s.play().catch(()=>{}));return}n(w,!1),n(l,"guess"),n(b,{c:0,t:0}),lt()};function lt(){n(o,null);const e=Math.floor(Math.random()*5)+1,a=Math.floor(Math.random()*2)+1,r=Math.floor(Math.random()*45)+1;A=r-1,bt(b,t(b).t++),s==null||s.pause(),s=new Audio(`/assets/tense/audio/${e}-${a}-${r}.mp3`),s.play().catch(()=>{})}function $t(e,a){if(t(l)!=="guess"||A===null)return;const r=Math.floor(A/9),v=A%9,d=e===r&&a===v;d&&bt(b,t(b).c++),n(o,{r:e,c:a,x:d,cr:r,cc:v}),setTimeout(lt,800)}Kt();var rt=te(),ot=ht(rt);{var It=e=>{var a=Vt(),r=i(a),v=i(r),d=i(v),V=k(i(d));K(V,1,()=>xt,L,(X,Z)=>{var f=Nt(),Q=i(f,!0);c(f),x(()=>g(Q,t(Z))),u(X,f)}),c(d),c(v);var _t=k(v);K(_t,5,()=>kt,L,(X,Z,f)=>{var Q=Ut(),tt=i(Q),Qt=i(tt,!0);c(tt);var Tt=k(tt);K(Tt,1,()=>yt(f),L,(Ht,et,P)=>{var T=Rt();let dt;var Ot=i(T);{var St=p=>{var C=E();x(st=>g(C,st),[()=>jt(t(et))],G),u(p,C)},Yt=(p,C)=>{{var st=$=>{var H=Et(),Bt=ht(H);{var Ct=I=>{var D=E();x(()=>g(D,t(et))),u(I,D)},Dt=I=>{var D=E("?");u(I,D)};J(Bt,I=>{t(o)&&!t(o).x&&t(o).cr===f&&t(o).cc===P?I(Ct):I(Dt,!1)})}u($,H)},zt=$=>{var H=E();x(()=>g(H,t(et))),u($,H)};J(p,$=>{t(l)==="guess"?$(st):$(zt,!1)},C)}};J(Ot,p=>{t(l)==="blank"?p(St):p(Yt,!1)})}c(T),x(p=>dt=O(T,1,"svelte-14fnfjt",null,dt,p),[()=>{var p;return{click:!t(l)&&t(y).endsWith("-1"),play:!t(l)&&t(j)===f*9+P,blank:t(l)==="blank",ok:t(l)==="guess"&&((p=t(o))==null?void 0:p.x)&&t(o).r===f&&t(o).c===P,no:t(l)==="guess"&&t(o)&&!t(o).x&&t(o).r===f&&t(o).c===P,ans:t(l)==="guess"&&t(o)&&!t(o).x&&t(o).cr===f&&t(o).cc===P}}],G),q("click",T,()=>{t(l)?t(l)==="guess"&&$t(f,P):wt(f*9+P)}),u(Ht,T)}),c(Q),x(()=>g(Qt,t(Z))),u(X,Q)}),c(_t),c(r),c(a),u(e,a)},qt=e=>{var a=Xt();u(e,a)};J(ot,e=>{t(S).length?e(It):e(qt,!1)})}var ct=k(ot,2),it=i(ct),U=k(it,2);K(U,5,()=>t(at),L,(e,a)=>{var r=Zt();let v;var d=i(r,!0);c(r),x(V=>{v=O(r,1,"svelte-14fnfjt",null,v,V),g(d,t(a).base)},[()=>({active:!t(l)&&t(h)===t(a).file_en,korean:!t(l)&&t(h)===t(a).file_en&&t(w)})],G),q("click",r,()=>{t(h)===t(a).file_en&&!t(l)?n(w,!t(w)):(n(w,!1),Y(t(a).file_en,t(a).base))}),u(e,r)}),c(U);var ft=k(U,2),M=i(ft);let ut;var At=i(M,!0);c(M);var z=k(M,2);let vt;var B=k(z,2);let pt;var Ft=i(B,!0);c(B),c(ft),c(ct),x((e,a,r,v,d)=>{M.disabled=e,ut=O(M,1,"svelte-14fnfjt",null,ut,a),g(At,t(m)?"⏸":"▶"),z.disabled=r,vt=O(z,1,"svelte-14fnfjt",null,vt,v),pt=O(B,1,"svelte-14fnfjt",null,pt,d),g(Ft,t(l)==="guess"?`${t(b).c}/${t(b).t}`:"Q2")},[()=>t(h).startsWith("tense_info")||t(l)||!t(y).endsWith("-1"),()=>({active:t(m)}),()=>t(h).startsWith("tense_info"),()=>({active:t(l)==="blank"}),()=>({active:t(l)==="guess"})],G),q("click",it,()=>t(h).startsWith("tense_info1")?Y("tense_info2.json"):Y("tense_info1.json")),q("click",M,Pt),q("click",z,Wt),q("click",B,Mt),u(mt,rt),Jt()}export{ie as component};
