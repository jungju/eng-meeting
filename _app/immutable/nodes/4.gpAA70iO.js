import{t as C,e as f,a as j,s as c,c as ft}from"../chunks/9qydAh7f.js";import"../chunks/DJ2Vnlnt.js";import{a3 as _t,a4 as L,a5 as ht,a6 as N,t as O,a7 as bt,a8 as d,c as n,g as t,m as i,q as a,r,a9 as gt,F as xt}from"../chunks/DtbIDjdp.js";import{i as kt}from"../chunks/WTzozmca.js";import{e as $t,i as yt}from"../chunks/CH1tXt4O.js";import{s as zt}from"../chunks/CJwhtPG-.js";import{s as Q}from"../chunks/CQ9w9LsZ.js";import{i as Mt}from"../chunks/C9d5Nnnl.js";import{s as wt,a as St}from"../chunks/D9rNo8m1.js";import{o as Et,a as jt}from"../chunks/D6I675W2.js";import{p as At}from"../chunks/DBG2ZJUo.js";import{b as Bt}from"../chunks/D1RYAnDD.js";var qt=C('<div><div class="line svelte-1m1v1z6"><div class="idx svelte-1m1v1z6"></div> <div class="content svelte-1m1v1z6"><div> </div> <div class="kor svelte-1m1v1z6"> </div></div></div></div>'),It=C('<p class="loading svelte-1m1v1z6">문장 데이터를 불러오는 중입니다...</p>'),Ct=C('<div class="list svelte-1m1v1z6"><!></div> <div class="controls svelte-1m1v1z6"><button> </button> <button> </button> <button> </button> <button> </button> <button> </button></div>',1);function Ot(U,W){_t(W,!1);const[X,Y]=wt(),D=()=>St(At,"$page",X),x=i(),A=i();let l=i([]),F=i([]),_=i(-1),o,h=i(!1),v=i("none"),k=i(!1),$=i(!1),y=i(!1),H=[];Et(async()=>{if(!t(x))return;const e=await fetch(`${t(A)}/sentences.json`);if(e.ok){const s=await e.json();a(l,s.sentences),a(F,s.korean)}}),jt(()=>{o==null||o.pause()});async function b(e){var s;e<0||e>=t(l).length||(a(_,e),await gt(),(s=document.getElementById(`s-${e}`))==null||s.scrollIntoView({behavior:"smooth",block:"center"}),o==null||o.pause(),o=new Audio(`${t(A)}/audio/${String(e+1).padStart(2,"0")}.mp3`),o.onended=()=>t(v)==="one"?b(t(_)):t(_)<t(l).length-1?b(t(_)+1):t(v)==="all"?b(0):a(h,!1),a(h,!0),o.play())}function Z(){o?o.paused?(o.play(),a(h,!0)):(o.pause(),a(h,!1)):b(0)}function tt(){a(v,t(v)==="none"?"one":t(v)==="one"?"all":"none")}function et(){a(k,!t(k))}function at(){a($,!t($))}function st(){a(y,!t(y)),t(y)?(H=[...t(l)],a(l,t(l).map(e=>{const s=e.split(" "),I=Math.min(3,Math.max(2,Math.floor(Math.random()*3))),m=[];for(;m.length<I;){const u=Math.floor(Math.random()*s.length);m.includes(u)||m.push(u)}return m.forEach(u=>s[u]="____"),s.join(" ")}))):a(l,[...H])}L(()=>D(),()=>{var e;a(x,((e=D().url.pathname.match(/\/sentence\/([^\/]+)/))==null?void 0:e[1])||"")}),L(()=>t(x),()=>{a(A,`${Bt}/assets/sentence/${t(x)}`)}),ht(),Mt();var P=Ct(),B=N(P),ot=n(B);{var nt=e=>{var s=ft(),I=N(s);$t(I,1,()=>t(l),yt,(m,u,g)=>{var p=qt();zt(p,"id",`s-${g}`);var T=n(p),V=n(T);V.textContent=`${g+1}.`;var G=d(V,2),E=n(G);let J;var mt=n(E,!0);r(E);var K=d(E,2),ut=n(K,!0);r(K),r(G),r(T),r(p),O(pt=>{Q(p,1,`sent ${g===t(_)?"active":""}`,"svelte-1m1v1z6"),J=Q(E,1,"text svelte-1m1v1z6",null,J,pt),c(mt,t(u)),c(ut,t(F)[g])},[()=>({large:t(k),hidden:t($)})],xt),f("click",p,()=>b(g)),j(m,p)}),j(e,s)},rt=e=>{var s=It();j(e,s)};kt(ot,e=>{t(l).length?e(nt):e(rt,!1)})}r(B);var R=d(B,2),z=n(R),it=n(z,!0);r(z);var M=d(z,2),lt=n(M);r(M);var w=d(M,2),vt=n(w,!0);r(w);var S=d(w,2),ct=n(S,!0);r(S);var q=d(S,2),dt=n(q,!0);r(q),r(R),O(()=>{c(it,t(h)?"⏸":"▶"),c(lt,`반복:${t(v)==="none"?"없음":t(v)==="one"?"한 문장":"전체"}`),c(vt,t(k)?"기본크기":"글자 크게"),c(ct,t($)?"영어 보이기":"영어 숨기기"),c(dt,t(y)?"원문 보기":"빈칸 만들기")}),f("click",z,Z),f("click",M,tt),f("click",w,et),f("click",S,at),f("click",q,st),j(U,P),bt(),Y()}export{Ot as component};
