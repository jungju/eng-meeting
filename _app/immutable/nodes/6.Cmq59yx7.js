import{t as h,e as k,a as _,s as W}from"../chunks/80LxVKeV.js";import"../chunks/CFaWhUhs.js";import{a3 as Mt,a6 as Wt,t as j,a7 as jt,a8 as f,c as i,I as K,g as t,s as r,m as v,r as o,ab as ot}from"../chunks/C3080PXC.js";import{i as It}from"../chunks/BZmyWsR4.js";import{e as O,i as Q}from"../chunks/CatFw3ce.js";import{s as x}from"../chunks/DWbnnoIW.js";import{i as Tt}from"../chunks/C6SzvuW1.js";import{o as qt}from"../chunks/BywZxHrF.js";var Ft=h('<th class="svelte-uippdn"> </th>'),At=h("<td> </td>"),zt=h('<tr><td class="svelte-uippdn"> </td><!></tr>'),Bt=h('<div style="overflow-x:auto"><table class="svelte-uippdn"><thead><tr><th class="svelte-uippdn">Subject</th><!></tr></thead><tbody></tbody></table></div>'),Ht=h('<p style="margin-bottom:80px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Ot=h("<button> </button>"),Qt=h('<!><div class="footer svelte-uippdn"><div class="left-controls"><button>Info</button></div><div class="mid-controls" style="display:flex;gap:8px;align-items:center"></div><div class="right-controls" style="display:flex;gap:8px;align-items:center"><button>한글</button><button>Blank</button><button> </button></div></div>',1);function Lt(it,ct){Mt(ct,!1);let L=v([]),S=v([]),I=v([]),b=v(""),T=v(""),n,l=v(""),q=v(null),p=v({c:0,t:0}),y=null,c=v(null),m=v(!1);const ut=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],vt=["I","You","He","We","They"],Y=async e=>(await fetch(e)).ok?await(await fetch(e)).json():[];qt(async()=>{r(L,await Y("/assets/tense/info.json")),await F("sentences1-1.json")});async function F(e,s){const a=await Y(`/assets/tense/${e}`);if(!a.length)return alert(`fail ${e}`);r(I,await Y(`/assets/tense/${e.replace("-1.json","-2.json")}`)),r(S,a),r(b,e),r(T,e.replace("sentences","").replace(".json","")),n==null||n.pause(),r(q,null),r(l,""),r(p,{c:0,t:0}),y=null,r(c,null),r(m,!1)}const pt=e=>(t(m)&&t(I).length?t(I):t(S)).slice(e*9,e*9+9),dt=e=>{t(l)||!t(T).endsWith("-1")||(n==null||n.pause(),n=new Audio(`/assets/tense/audio/${t(T)}-${e+1}.mp3`),r(q,e),n.onended=()=>r(q,null),n.play().catch(()=>{}))},ft=()=>{r(l,"blank"),r(c,null)},_t=()=>{if(t(l)==="guess"){n==null||n.pause(),n&&(n.currentTime=0,n.play().catch(()=>{}));return}r(m,!1),r(l,"guess"),r(p,{c:0,t:0}),N()},N=()=>{r(c,null);const e=Math.floor(Math.random()*5)+1,s=Math.floor(Math.random()*2)+1,a=Math.floor(Math.random()*45)+1;y=a-1,ot(p,t(p).t++),n==null||n.pause(),n=new Audio(`/assets/tense/audio/${e}-${s}-${a}.mp3`),n.play().catch(()=>{})},ht=(e,s)=>{if(t(l)!=="guess"||y===null)return;const a=e===Math.floor(y/9)&&s===y%9;a&&ot(p,t(p).c++),r(c,{r:e,c:s,x:a}),setTimeout(N,500)},bt=e=>{const s=e.replace(/\.$/,"").split(" ");return s.length<3?e:`${s[0]} ${s.slice(1,-1).map(a=>"_".repeat(a.length)).join(" ")} ${s[s.length-1]}`};Tt();var R=Qt(),U=Wt(R);{var mt=e=>{var s=Bt(),a=i(s),d=i(a),g=i(d),P=f(i(g));O(P,1,()=>ut,Q,(E,G)=>{var u=Ft(),$=i(u,!0);o(u),j(()=>W($,t(G))),_(E,u)}),o(g),o(d);var nt=f(d);O(nt,5,()=>vt,Q,(E,G,u)=>{var $=zt(),J=i($),xt=i(J,!0);o(J);var yt=f(J);O(yt,1,()=>pt(u),Q,(Pt,lt,w)=>{var M=At();let rt;var $t=i(M,!0);o(M),j((H,wt)=>{rt=x(M,1,"svelte-uippdn",null,rt,H),W($t,wt)},[()=>{var H;return{click:!t(l)&&t(T).endsWith("-1"),play:!t(l)&&t(q)===u*9+w,blank:t(l)==="blank",ok:t(l)==="guess"&&((H=t(c))==null?void 0:H.x)&&t(c).r===u&&t(c).c===w,no:t(l)==="guess"&&t(c)&&t(c).x===!1&&t(c).r===u&&t(c).c===w}},()=>t(l)==="blank"?bt(t(lt)):t(l)==="guess"?"?":t(lt)],K),k("click",M,()=>{t(l)?t(l)==="guess"&&ht(u,w):dt(u*9+w)}),_(Pt,M)}),o($),j(()=>W(xt,t(G))),_(E,$)}),o(nt),o(a),o(s),_(e,s)},gt=e=>{var s=Ht();_(e,s)};It(U,e=>{t(S).length?e(mt):e(gt,!1)})}var V=f(U),C=i(V),X=i(C);let Z;o(C);var D=f(C);O(D,5,()=>t(L),Q,(e,s)=>{var a=Ot();let d;var g=i(a,!0);o(a),j(P=>{d=x(a,1,"svelte-uippdn",null,d,P),W(g,t(s).base)},[()=>({active:!t(l)&&t(b)===t(s).file_en})],K),k("click",a,()=>F(t(s).file_en,t(s).base)),_(e,a)}),o(D);var tt=f(D),A=i(tt);let et;var z=f(A);let st;var B=f(z);let at;var kt=i(B,!0);o(B),o(tt),o(V),j((e,s,a,d,g,P)=>{Z=x(X,1,"svelte-uippdn",null,Z,e),A.disabled=s,et=x(A,1,"svelte-uippdn",null,et,a),z.disabled=d,st=x(z,1,"svelte-uippdn",null,st,g),at=x(B,1,"svelte-uippdn",null,at,P),W(kt,t(l)==="guess"?`${t(p).c}/${t(p).t}`:"Tense Quiz")},[()=>({active:t(b).startsWith("tense_info")}),()=>!t(I).length||t(b).startsWith("tense_info")||t(l),()=>({active:t(m)}),()=>t(b).startsWith("tense_info"),()=>({active:t(l)==="blank"}),()=>({active:t(l)==="guess"})],K),k("click",X,()=>t(b).startsWith("tense_info1")?F("tense_info2.json"):F("tense_info1.json")),k("click",A,()=>r(m,!t(m))),k("click",z,ft),k("click",B,_t),_(it,R),jt()}export{Lt as component};
