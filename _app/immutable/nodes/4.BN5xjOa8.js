import{t as q,e as M,a as m,s as x,c as ge}from"../chunks/DGLAqYrP.js";import"../chunks/BMzVrWaL.js";import{a6 as be,a7 as U,a8 as he,f as V,t as j,a9 as xe,a as r,s as k,c as i,g as e,j as a,r as o,aa as ke,ab as qe,ac as ye,O as we}from"../chunks/8yeZbsG4.js";import{i as N}from"../chunks/BAjmUJVp.js";import{e as $e,i as Ie}from"../chunks/DHWvvD31.js";import{s as Y}from"../chunks/DOIkYpns.js";import{i as Se}from"../chunks/vOApP0Mz.js";import{s as Me,a as je}from"../chunks/DYmniotX.js";import{o as Ae,a as Ee}from"../chunks/twRiorZ6.js";import{p as ze}from"../chunks/BSro2pSw.js";import{b as Ne}from"../chunks/CGGTc_c8.js";var Re=q('<div class="remain-big svelte-1nq3stn"> </div>'),Te=q('<p class="eng svelte-1nq3stn"> </p>'),Be=q('<p class="kor svelte-1nq3stn"> </p>'),Ce=q('<p class="placeholder svelte-1nq3stn">•••</p>'),De=q("<button> </button>"),Ge=q('<main class="wrapper svelte-1nq3stn"><div><div class="order-big svelte-1nq3stn"> </div> <!> <!></div> <button class="next-btn svelte-1nq3stn">NEXT ⏭</button></main> <div class="controls svelte-1nq3stn"><button class="svelte-1nq3stn">⏹ 멈춤</button> <button class="svelte-1nq3stn"> </button> <div class="gap-group svelte-1nq3stn"></div></div>',1);function Ve(Z,ee){be(ee,!1);const[te,ae]=Me(),W=()=>je(ze,"$page",te),R=r(),T=r();let d=r([]),X=r([]),c=r(-1),B=r(0),s,g=r(!1),v=r(!1),b=!1,u=r("none"),F=[1e4,2e4,-1],y=r(F[0]),p=r(0),_,w=new Set;Ae(async()=>{const t=await fetch(`${e(T)}/sentences.json`);if(t.ok){const n=await t.json();a(d,n.sentences),a(X,n.korean)}}),Ee(()=>{s==null||s.pause(),clearInterval(_)});function se(){if(w.size===e(d).length)return-1;let t;do t=Math.floor(Math.random()*e(d).length);while(w.has(t));return t}async function H(t,n=!0){t<0||t>=e(d).length||(n&&ke(B),a(c,t),w.add(t),await qe(),s==null||s.pause(),s=new Audio(`${e(T)}/audio/${String(t+1).padStart(2,"0")}.mp3`),s.onended=()=>{a(g,!1),b?(b=!1,A()):e(y)>0&&w.size<e(d).length&&ne()},a(g,!0),s.play())}function ne(){a(v,!0),a(p,Math.ceil(e(y)/1e3)),_=setInterval(()=>{ye(p,-1)<=0&&(clearInterval(_),a(v,!1),e(g)?b=!0:A())},1e3)}function A(){s==null||s.pause(),clearInterval(_),a(g,a(v,b=!1)),a(p,0);const t=se();t!==-1&&H(t)}function re(){e(c)===-1?A():(s==null||s.pause(),clearInterval(_),a(v,b=!1),a(p,0),H(e(c),!1))}function oe(){s==null||s.pause(),clearInterval(_),a(g,a(v,b=!1)),a(c,-1),a(B,0),a(p,0),w.clear()}function le(){a(u,e(u)==="none"?"eng":e(u)==="eng"?"kor":"none")}function ie(t){a(y,t),e(v)&&(clearInterval(_),a(v,!1),a(p,0))}U(()=>W(),()=>{a(R,W().params.id)}),U(()=>e(R),()=>{a(T,`${Ne}/assets/sentence/${e(R)}`)}),he(),Se();var J=Ge(),C=V(J),$=i(C),D=i($),ce=i(D,!0);o(D);var K=k(D,2);{var ve=t=>{var n=Re(),l=i(n,!0);o(n),j(()=>x(l,e(p))),m(t,n)};N(K,t=>{e(y)>=0&&e(p)>0&&t(ve)})}var pe=k(K,2);{var fe=t=>{var n=ge(),l=V(n);{var z=f=>{var I=Te(),O=i(I,!0);o(I),j(()=>x(O,e(d)[e(c)])),m(f,I)},G=(f,I)=>{{var O=h=>{var S=Be(),de=i(S,!0);o(S),j(()=>x(de,e(X)[e(c)])),m(h,S)},me=h=>{var S=Ce();m(h,S)};N(f,h=>{e(u)==="kor"?h(O):h(me,!1)},I)}};N(l,f=>{e(u)==="eng"?f(z):f(G,!1)})}m(t,n)};N(pe,t=>{e(c)!==-1&&t(fe)})}o($);var ue=k($,2);o(C);var L=k(C,2),P=i(L),E=k(P,2),_e=i(E,!0);o(E);var Q=k(E,2);$e(Q,5,()=>F,Ie,(t,n)=>{var l=De();let z;var G=i(l,!0);o(l),j(f=>{z=Y(l,1,"svelte-1nq3stn",null,z,f),x(G,e(n)<0?"시간 제한 없음":`${e(n)/1e3}s`)},[()=>({selected:e(y)===e(n)})],we),M("click",l,()=>ie(e(n))),m(t,l)}),o(Q),o(L),j(()=>{Y($,1,`sentence-box ${e(g)||e(v)?"playing":""}`,"svelte-1nq3stn"),x(ce,e(c)===-1?"Ready":`#${e(B)}`),x(_e,e(u)==="none"?"표시:없음":e(u)==="eng"?"표시:영어":"표시:한글")}),M("click",$,re),M("click",ue,A),M("click",P,oe),M("click",E,le),m(Z,J),xe(),ae()}export{Ve as component};
