import"../chunks/NZTpNUN0.js";import{i as Dt}from"../chunks/C1kFBjD0.js";import{p as Et,t as z,f as gt,h as m,a6 as A,a as v,b as Gt,s as y,K as D,g as t,d,e as i,i as x,o as a,r as c,m as ht,a7 as E,c as Jt}from"../chunks/kc4YAh9y.js";import{i as G}from"../chunks/meG6WkfV.js";import{e as J,i as L}from"../chunks/BvPctM3R.js";import{s as H}from"../chunks/D8RCsmFZ.js";import{o as Lt}from"../chunks/B6AwUu_V.js";var Nt=z('<th class="svelte-zlyqog"> </th>'),Rt=z("<td><!></td>"),Ut=z('<tr><td class="svelte-zlyqog"> </td><!></tr>'),Vt=z('<div style="overflow-x:auto"><table class="svelte-zlyqog"><thead><tr><th class="svelte-zlyqog">S</th><!></tr></thead><tbody></tbody></table></div>'),Xt=z('<p style="margin-bottom: 120px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Zt=z("<button> </button>"),te=z('<!> <div class="footer svelte-zlyqog"><button class="info-btn svelte-zlyqog">Info</button> <div style="display:flex; flex-wrap:wrap; gap:5px; justify-content:center;"></div> <div style="display:flex; gap:12px;"><button> </button> <button>Q1</button> <button> </button></div></div>',1);function ce(bt,mt){Et(mt,!1);let at=d([]),K=d([]),N=[],_=d(""),k=d(""),r,n=d(""),q=d(null),g=d({c:0,t:0}),I=null,o=d(null),w=d(!1),h=d(!1),j=0;const yt=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],xt=["I","You","He","We","They"],R=async e=>{const s=await fetch(e);return s.ok?await s.json():[]};Lt(async()=>{a(at,await R("/assets/tense/info.json")),await O("sentences1-1.json")});async function O(e,s){const l=await R(`/assets/tense/${e}`);if(!l.length)return alert(`fail ${e}`);N=await R(`/assets/tense/${e.replace("-1.json","-2.json")}`),a(K,l),a(_,e),a(k,e.replace("sentences","").replace(".json","")),r?.pause(),a(q,null),a(n,""),a(g,{c:0,t:0}),I=null,a(o,null),a(w,!1),a(h,!1)}const kt=e=>(t(w)&&N.length?N:t(K)).slice(e*9,e*9+9);function qt(e){const s=e.replace(/\.$/,"").split(" ");return s.length<3?e:`${s[0]} ${s.slice(1,-1).map(l=>"_".repeat(l.length)).join(" ")} ${s[s.length-1]}`}const wt=e=>{t(n)||!t(k).endsWith("-1")||(r?.pause(),r=new Audio(`/assets/tense/audio/${t(k)}-${e+1}.mp3`),a(q,e),r.onended=()=>a(q,null),r.play().catch(()=>{}))};function nt(){if(!t(h)||j>=t(K).length){a(h,!1),a(q,null);return}r?.pause(),r=new Audio(`/assets/tense/audio/${t(k)}-${j+1}.mp3`),a(q,j),r.onended=()=>{j++,nt()},r.play().catch(()=>{})}function Pt(){if(t(h)){r?.pause(),a(h,!1),a(q,null);return}t(_).startsWith("tense_info")||t(n)||!t(k).endsWith("-1")||(a(h,!0),j=0,nt())}const zt=()=>{a(n,"blank"),a(o,null)},Wt=()=>{if(t(n)==="guess"){r?.pause(),r&&(r.currentTime=0,r.play().catch(()=>{}));return}a(w,!1),a(n,"guess"),a(g,{c:0,t:0}),lt()};function lt(){a(o,null);const e=Math.floor(Math.random()*5)+1,s=Math.floor(Math.random()*2)+1,l=Math.floor(Math.random()*45)+1;I=l-1,ht(g,t(g).t++),r?.pause(),r=new Audio(`/assets/tense/audio/${e}-${s}-${l}.mp3`),r.play().catch(()=>{})}function Mt(e,s){if(t(n)!=="guess"||I===null)return;const l=Math.floor(I/9),f=I%9,p=e===l&&s===f;p&&ht(g,t(g).c++),a(o,{r:e,c:s,x:p,cr:l,cc:f}),setTimeout(lt,800)}Dt();var ot=te(),rt=gt(ot);{var $t=e=>{var s=Vt(),l=i(s),f=i(l),p=i(f),V=y(i(p));J(V,1,()=>yt,L,(X,Z)=>{var u=Nt(),F=i(u,!0);c(u),m(()=>x(F,t(Z))),v(X,u)}),c(p),c(f);var pt=y(f);J(pt,5,()=>xt,L,(X,Z,u)=>{var F=Ut(),tt=i(F),Ft=i(tt,!0);c(tt);var Qt=y(tt);J(Qt,1,()=>kt(u),L,(Tt,et,P)=>{var Q=Rt();let _t;var Ht=i(Q);{var Kt=b=>{var B=E();m(st=>x(B,st),[()=>qt(t(et))],D),v(b,B)},Ot=(b,B)=>{{var st=M=>{var T=Jt(),Yt=gt(T);{var Bt=$=>{var C=E();m(()=>x(C,t(et))),v($,C)},Ct=$=>{var C=E("?");v($,C)};G(Yt,$=>{t(o)&&!t(o).x&&t(o).cr===u&&t(o).cc===P?$(Bt):$(Ct,!1)})}v(M,T)},St=M=>{var T=E();m(()=>x(T,t(et))),v(M,T)};G(b,M=>{t(n)==="guess"?M(st):M(St,!1)},B)}};G(Ht,b=>{t(n)==="blank"?b(Kt):b(Ot,!1)})}c(Q),m(b=>_t=H(Q,1,"svelte-zlyqog",null,_t,b),[()=>({click:!t(n)&&t(k).endsWith("-1"),play:!t(n)&&t(q)===u*9+P,blank:t(n)==="blank",ok:t(n)==="guess"&&t(o)?.x&&t(o).r===u&&t(o).c===P,no:t(n)==="guess"&&t(o)&&!t(o).x&&t(o).r===u&&t(o).c===P,ans:t(n)==="guess"&&t(o)&&!t(o).x&&t(o).cr===u&&t(o).cc===P})],D),A("click",Q,()=>{t(n)?t(n)==="guess"&&Mt(u,P):wt(u*9+P)}),v(Tt,Q)}),c(F),m(()=>x(Ft,t(Z))),v(X,F)}),c(pt),c(l),c(s),v(e,s)},At=e=>{var s=Xt();v(e,s)};G(rt,e=>{t(K).length?e($t):e(At,!1)})}var ct=y(rt,2),it=i(ct),U=y(it,2);J(U,5,()=>t(at),L,(e,s)=>{var l=Zt();let f;var p=i(l,!0);c(l),m(V=>{f=H(l,1,"svelte-zlyqog",null,f,V),x(p,t(s).base)},[()=>({active:!t(n)&&t(_)===t(s).file_en,korean:!t(n)&&t(_)===t(s).file_en&&t(w)})],D),A("click",l,()=>{t(_)===t(s).file_en&&!t(n)?a(w,!t(w)):(a(w,!1),O(t(s).file_en,t(s).base))}),v(e,l)}),c(U);var ut=y(U,2),W=i(ut);let vt;var It=i(W,!0);c(W);var S=y(W,2);let ft;var Y=y(S,2);let dt;var jt=i(Y,!0);c(Y),c(ut),c(ct),m((e,s,l,f,p)=>{W.disabled=e,vt=H(W,1,"svelte-zlyqog",null,vt,s),x(It,t(h)?"⏸":"▶"),S.disabled=l,ft=H(S,1,"svelte-zlyqog",null,ft,f),dt=H(Y,1,"svelte-zlyqog",null,dt,p),x(jt,t(n)==="guess"?`${t(g).c}/${t(g).t}`:"Q2")},[()=>t(_).startsWith("tense_info")||t(n)||!t(k).endsWith("-1"),()=>({active:t(h)}),()=>t(_).startsWith("tense_info"),()=>({active:t(n)==="blank"}),()=>({active:t(n)==="guess"})],D),A("click",it,()=>t(_).startsWith("tense_info1")?O("tense_info2.json"):O("tense_info1.json")),A("click",W,Pt),A("click",S,zt),A("click",Y,Wt),v(bt,ot),Gt()}export{ce as component};
