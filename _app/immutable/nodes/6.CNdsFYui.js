import{t as W,e as j,a as u,s as g,b as E,c as Et}from"../chunks/Db9VB6BF.js";import"../chunks/CFaWhUhs.js";import{a3 as Gt,a6 as bt,t as x,a7 as Jt,a8 as k,c as i,I as G,g as t,s as n,m as _,r as c,ab as ht}from"../chunks/C3080PXC.js";import{i as J}from"../chunks/BZmyWsR4.js";import{e as K,i as L}from"../chunks/CatFw3ce.js";import{s as H}from"../chunks/DWbnnoIW.js";import{i as Kt}from"../chunks/C6SzvuW1.js";import{o as Lt}from"../chunks/BywZxHrF.js";var Nt=W('<th class="svelte-zavtt2"> </th>'),Rt=W("<td><!></td>"),Ut=W('<tr><td class="svelte-zavtt2"> </td><!></tr>'),Vt=W('<div style="overflow-x:auto"><table class="svelte-zavtt2"><thead><tr><th class="svelte-zavtt2">Subject</th><!></tr></thead><tbody></tbody></table></div>'),Xt=W('<p style="margin-bottom: 120px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Zt=W("<button> </button>"),te=W('<!> <div class="footer svelte-zavtt2"><button class="info-btn svelte-zavtt2">Info</button> <div style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center;"></div> <div style="display:flex; gap:12px;"><button> </button> <button>Q1</button> <button> </button></div></div>',1);function ie(mt,gt){Gt(gt,!1);let at=_([]),O=_([]),N=[],b=_(""),y=_(""),s,l=_(""),w=_(null),h=_({c:0,t:0}),q=null,o=_(null),P=_(!1),m=_(!1),A=0;const xt=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],kt=["I","You","He","We","They"],R=async e=>{const a=await fetch(e);return a.ok?await a.json():[]};Lt(async()=>{n(at,await R("/assets/tense/info.json")),await S("sentences1-1.json")});async function S(e,a){const r=await R(`/assets/tense/${e}`);if(!r.length)return alert(`fail ${e}`);N=await R(`/assets/tense/${e.replace("-1.json","-2.json")}`),n(O,r),n(b,e),n(y,e.replace("sentences","").replace(".json","")),s==null||s.pause(),n(w,null),n(l,""),n(h,{c:0,t:0}),q=null,n(o,null),n(P,!1),n(m,!1)}const yt=e=>(t(P)&&N.length?N:t(O)).slice(e*9,e*9+9);function wt(e){const a=e.replace(/\.$/,"").split(" ");return a.length<3?e:`${a[0]} ${a.slice(1,-1).map(r=>"_".repeat(r.length)).join(" ")} ${a[a.length-1]}`}const Pt=e=>{t(l)||!t(y).endsWith("-1")||(s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(y)}-${e+1}.mp3`),n(w,e),s.onended=()=>n(w,null),s.play().catch(()=>{}))};function nt(){if(!t(m)||A>=t(O).length){n(m,!1),n(w,null);return}s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(y)}-${A+1}.mp3`),n(w,A),s.onended=()=>{A++,nt()},s.play().catch(()=>{})}function zt(){if(t(m)){s==null||s.pause(),n(m,!1),n(w,null);return}t(b).startsWith("tense_info")||t(l)||!t(y).endsWith("-1")||(n(m,!0),A=0,nt())}const Wt=()=>{n(l,"blank"),n(o,null)},Mt=()=>{if(t(l)==="guess"){s==null||s.pause(),s&&(s.currentTime=0,s.play().catch(()=>{}));return}n(P,!1),n(l,"guess"),n(h,{c:0,t:0}),lt()};function lt(){n(o,null);const e=Math.floor(Math.random()*5)+1,a=Math.floor(Math.random()*2)+1,r=Math.floor(Math.random()*45)+1;q=r-1,ht(h,t(h).t++),s==null||s.pause(),s=new Audio(`/assets/tense/audio/${e}-${a}-${r}.mp3`),s.play().catch(()=>{})}function $t(e,a){if(t(l)!=="guess"||q===null)return;const r=Math.floor(q/9),f=q%9,d=e===r&&a===f;d&&ht(h,t(h).c++),n(o,{r:e,c:a,x:d,cr:r,cc:f}),setTimeout(lt,800)}Kt();var rt=te(),ot=bt(rt);{var It=e=>{var a=Vt(),r=i(a),f=i(r),d=i(f),V=k(i(d));K(V,1,()=>xt,L,(X,Z)=>{var v=Nt(),F=i(v,!0);c(v),x(()=>g(F,t(Z))),u(X,v)}),c(d),c(f);var _t=k(f);K(_t,5,()=>kt,L,(X,Z,v)=>{var F=Ut(),tt=i(F),Ft=i(tt,!0);c(tt);var Qt=k(tt);K(Qt,1,()=>yt(v),L,(Tt,et,z)=>{var Q=Rt();let dt;var Ht=i(Q);{var Ot=p=>{var C=E();x(st=>g(C,st),[()=>wt(t(et))],G),u(p,C)},St=(p,C)=>{{var st=$=>{var T=Et(),Bt=bt(T);{var Ct=I=>{var D=E();x(()=>g(D,t(et))),u(I,D)},Dt=I=>{var D=E("?");u(I,D)};J(Bt,I=>{t(o)&&!t(o).x&&t(o).cr===v&&t(o).cc===z?I(Ct):I(Dt,!1)})}u($,T)},Yt=$=>{var T=E();x(()=>g(T,t(et))),u($,T)};J(p,$=>{t(l)==="guess"?$(st):$(Yt,!1)},C)}};J(Ht,p=>{t(l)==="blank"?p(Ot):p(St,!1)})}c(Q),x(p=>dt=H(Q,1,"svelte-zavtt2",null,dt,p),[()=>{var p;return{click:!t(l)&&t(y).endsWith("-1"),play:!t(l)&&t(w)===v*9+z,blank:t(l)==="blank",ok:t(l)==="guess"&&((p=t(o))==null?void 0:p.x)&&t(o).r===v&&t(o).c===z,no:t(l)==="guess"&&t(o)&&!t(o).x&&t(o).r===v&&t(o).c===z,ans:t(l)==="guess"&&t(o)&&!t(o).x&&t(o).cr===v&&t(o).cc===z}}],G),j("click",Q,()=>{t(l)?t(l)==="guess"&&$t(v,z):Pt(v*9+z)}),u(Tt,Q)}),c(F),x(()=>g(Ft,t(Z))),u(X,F)}),c(_t),c(r),c(a),u(e,a)},jt=e=>{var a=Xt();u(e,a)};J(ot,e=>{t(O).length?e(It):e(jt,!1)})}var ct=k(ot,2),it=i(ct),U=k(it,2);K(U,5,()=>t(at),L,(e,a)=>{var r=Zt();let f;var d=i(r,!0);c(r),x(V=>{f=H(r,1,"svelte-zavtt2",null,f,V),g(d,t(a).base)},[()=>({active:!t(l)&&t(b)===t(a).file_en,korean:!t(l)&&t(b)===t(a).file_en&&t(P)})],G),j("click",r,()=>{t(b)===t(a).file_en&&!t(l)?n(P,!t(P)):(n(P,!1),S(t(a).file_en,t(a).base))}),u(e,r)}),c(U);var vt=k(U,2),M=i(vt);let ut;var qt=i(M,!0);c(M);var Y=k(M,2);let ft;var B=k(Y,2);let pt;var At=i(B,!0);c(B),c(vt),c(ct),x((e,a,r,f,d)=>{M.disabled=e,ut=H(M,1,"svelte-zavtt2",null,ut,a),g(qt,t(m)?"⏸":"▶"),Y.disabled=r,ft=H(Y,1,"svelte-zavtt2",null,ft,f),pt=H(B,1,"svelte-zavtt2",null,pt,d),g(At,t(l)==="guess"?`${t(h).c}/${t(h).t}`:"Q2")},[()=>t(b).startsWith("tense_info")||t(l)||!t(y).endsWith("-1"),()=>({active:t(m)}),()=>t(b).startsWith("tense_info"),()=>({active:t(l)==="blank"}),()=>({active:t(l)==="guess"})],G),j("click",it,()=>t(b).startsWith("tense_info1")?S("tense_info2.json"):S("tense_info1.json")),j("click",M,zt),j("click",Y,Wt),j("click",B,Mt),u(mt,rt),Jt()}export{ie as component};
