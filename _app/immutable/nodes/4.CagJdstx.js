import{t as k,e as M,a as _,s as y,c as xe}from"../chunks/CMrKsAIM.js";import"../chunks/BmGMRanT.js";import{a9 as ye,g as e,m as Y,l as t,aa as ke,a as o,ab as F,ac as we,f as Z,t as R,ad as $e,ae as Ie,af as Se,s as g,c as i,r as n,R as Ee}from"../chunks/Btjerwqt.js";import{i as N}from"../chunks/3CCI0ror.js";import{e as Me,i as Re}from"../chunks/Dg5wf27x.js";import{s as ee}from"../chunks/D6txDpE6.js";import{b as je}from"../chunks/D-3x-aaD.js";import{i as ze}from"../chunks/Bn3qeioi.js";import{s as Ae,a as Ne}from"../chunks/Bqr_BXZZ.js";import{o as Te,a as qe}from"../chunks/DDGzSC41.js";import{p as Be}from"../chunks/Dr0qJLGx.js";import{b as Ce}from"../chunks/B9u5BkHF.js";var De=k('<div class="remain-big svelte-93eou9"> </div>'),Ge=k('<p class="eng svelte-93eou9"> </p>'),We=k('<p class="kor svelte-93eou9"> </p>'),Xe=k('<p class="placeholder svelte-93eou9">•••</p>'),Fe=k("<button> </button>"),He=k('<main class="wrapper svelte-93eou9"><div><div class="order-big svelte-93eou9"> </div> <!> <!></div> <button class="next-btn svelte-93eou9">NEXT ⏭</button></main> <div class="controls svelte-93eou9"><button class="svelte-93eou9">⏹ 멈춤</button> <button class="svelte-93eou9"> </button> <div class="gap-group svelte-93eou9"></div></div> <audio playsinline="" preload="auto" class="svelte-93eou9"></audio>',1);function ta(ae,te){ye(te,!1);const[se,re]=Ae(),H=()=>Ne(Be,"$page",se),T=o(),q=o();let b=o([]),J=o([]),c=o(-1),B=o(0),r=o(),h=o(!1),v=o(!1),f=!1,d=o("none"),K=[1e4,2e4,-1],w=o(K[0]),u=o(0),m,$=new Set;Te(async()=>{const a=await fetch(`${e(q)}/sentences.json`);if(a.ok){const s=await a.json();t(b,s.sentences),t(J,s.korean)}}),qe(()=>{var a;(a=e(r))==null||a.pause(),clearInterval(m)});function oe(){if($.size===e(b).length)return-1;let a;do a=Math.floor(Math.random()*e(b).length);while($.has(a));return a}async function L(a,s=!0){if(!(a<0||a>=e(b).length)){s&&Ie(B),t(c,a),$.add(a),await Se(),e(r).pause(),Y(r,e(r).src=`${e(q)}/audio/${String(a+1).padStart(2,"0")}.mp3`);try{await e(r).play()}catch{f=!0;return}t(h,!0)}}O();function O(){e(r)&&Y(r,e(r).onended=()=>{t(h,!1),f?(f=!1,j()):e(w)>0&&$.size<e(b).length&&ne()})}function ne(){t(v,!0),t(u,Math.ceil(e(w)/1e3)),m=setInterval(()=>{ke(u,-1)<=0&&(clearInterval(m),t(v,!1),e(h)?f=!0:j())},1e3)}function j(){e(r).pause(),clearInterval(m),t(h,t(v,f=!1)),t(u,0);const a=oe();a!==-1&&L(a)}function le(){e(c)===-1?j():(e(r).pause(),clearInterval(m),t(v,f=!1),t(u,0),L(e(c),!1))}function ie(){e(r).pause(),clearInterval(m),t(h,t(v,f=!1)),t(c,-1),t(B,0),t(u,0),$.clear()}function ce(){t(d,e(d)==="none"?"eng":e(d)==="eng"?"kor":"none")}function ve(a){t(w,a),e(v)&&(clearInterval(m),t(v,!1),t(u,0))}F(()=>H(),()=>{t(T,H().params.id)}),F(()=>e(T),()=>{t(q,`${Ce}/assets/sentence/${e(T)}`)}),F(()=>e(r),()=>{e(r)&&O()}),we(),ze();var P=He(),C=Z(P),I=i(C),D=i(I),ue=i(D,!0);n(D);var Q=g(D,2);{var pe=a=>{var s=De(),l=i(s,!0);n(s),R(()=>y(l,e(u))),_(a,s)};N(Q,a=>{e(w)>=0&&e(u)>0&&a(pe)})}var fe=g(Q,2);{var de=a=>{var s=xe(),l=Z(s);{var A=p=>{var S=Ge(),X=i(S,!0);n(S),R(()=>y(X,e(b)[e(c)])),_(p,S)},W=(p,S)=>{{var X=x=>{var E=We(),he=i(E,!0);n(E),R(()=>y(he,e(J)[e(c)])),_(x,E)},be=x=>{var E=Xe();_(x,E)};N(p,x=>{e(d)==="kor"?x(X):x(be,!1)},S)}};N(l,p=>{e(d)==="eng"?p(A):p(W,!1)})}_(a,s)};N(fe,a=>{e(c)!==-1&&a(de)})}n(I);var me=g(I,2);n(C);var G=g(C,2),U=i(G),z=g(U,2),_e=i(z,!0);n(z);var V=g(z,2);Me(V,5,()=>K,Re,(a,s)=>{var l=Fe();let A;var W=i(l,!0);n(l),R(p=>{A=ee(l,1,"svelte-93eou9",null,A,p),y(W,e(s)<0?"시간 제한 없음":`${e(s)/1e3}s`)},[()=>({selected:e(w)===e(s)})],Ee),M("click",l,()=>ve(e(s))),_(a,l)}),n(V),n(G);var ge=g(G,2);je(ge,a=>t(r,a),()=>e(r)),R(()=>{ee(I,1,`sentence-box ${e(h)||e(v)?"playing":""}`,"svelte-93eou9"),y(ue,e(c)===-1?"Ready":`#${e(B)}`),y(_e,e(d)==="none"?"표시:없음":e(d)==="eng"?"표시:영어":"표시:한글")}),M("click",I,le),M("click",me,j),M("click",U,ie),M("click",z,ce),_(ae,P),$e(),re()}export{ta as component};
