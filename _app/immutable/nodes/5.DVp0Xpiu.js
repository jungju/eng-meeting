import{t as q,e as h,a as K,s as _,c as wt}from"../chunks/C84cx4to.js";import"../chunks/Cz3YCu0P.js";import{a9 as Et,aa as j,ab as Mt,f as tt,t as V,ac as St,s as d,g as t,a as o,l as a,c as n,r as l,m as et,ae as Tt,R as Kt}from"../chunks/CWJw-b4-.js";import{i as at}from"../chunks/KPcsEuus.js";import{e as jt,i as At}from"../chunks/DLP_h01C.js";import{s as Bt}from"../chunks/DmHdXTYY.js";import{s as z}from"../chunks/DMbZqknN.js";import{b as Ct}from"../chunks/CV8ZBm2l.js";import{i as Gt}from"../chunks/VsyBG53z.js";import{s as It,a as Lt}from"../chunks/V4_yusMK.js";import{o as Dt,a as Rt}from"../chunks/xR0fCDvz.js";import{p as qt}from"../chunks/Dm-qrGE5.js";import{b as Nt}from"../chunks/BoA3rCIh.js";var Pt=q('<div><div class="line svelte-u34xuu"><div class="idx svelte-u34xuu"></div> <div class="content svelte-u34xuu"><div> </div> <div> </div></div></div></div>'),Qt=q('<p class="loading svelte-u34xuu">문장 데이터를 불러오는 중입니다...</p>'),Vt=q('<div class="controls svelte-u34xuu"><button class="play-btn svelte-u34xuu"> </button> <button class="svelte-u34xuu"> </button> <button class="svelte-u34xuu"> </button> <button class="svelte-u34xuu"> </button> <button class="svelte-u34xuu"> </button> <button class="svelte-u34xuu"> </button></div>'),zt=q('<div class="list svelte-u34xuu"><!></div> <!> <button class="bar-toggle svelte-u34xuu"> </button> <audio playsinline="" preload="auto" style="display:none"></audio>',1);function oe(st,ot){Et(ot,!1);const[nt,lt]=It(),F=()=>Lt(qt,"$page",nt),A=o(),N=o(),H=o(),J=o();let f=o([]),O=o([]),g=o(-1),r=o(),x=o(!1),k=o("none"),B=o(!1),U=[],$=null;const P=[0,1e3,3e3,5e3];let w=o(0),m=o("both"),b=o("eng"),C=o(!0);Dt(async()=>{if(!t(A))return;const e=await fetch(`${t(N)}/sentences.json`);if(e.ok){const s=await e.json();a(f,s.sentences),a(O,s.korean)}}),Rt(()=>{var e;(e=t(r))==null||e.pause(),$&&clearTimeout($)});let E=[];async function G(e){var s;e<0||e>=t(f).length||(a(g,e),await Tt(),(s=document.getElementById(`s-${e}`))==null||s.scrollIntoView({behavior:"smooth",block:"center"}),E=t(b)==="both"?["audio","audiok"]:t(b)==="kor"?["audiok"]:["audio"],await W())}async function W(){if(!E.length){a(x,!1);return}const e=E.shift();t(r).pause(),et(r,t(r).src=`${t(N)}/${e}/${String(t(g)+1).padStart(2,"0")}.mp3`);try{await t(r).play(),a(x,!0)}catch{a(x,!1)}}function rt(){et(r,t(r).onended=()=>{$=setTimeout(async()=>{if(E.length){await W();return}t(k)==="one"?G(t(g)):t(k)==="all"?G((t(g)+1)%t(f).length):a(x,!1)},P[t(w)])})}function it(){t(x)?(t(r).pause(),a(x,!1),E=[],$&&(clearTimeout($),$=null)):G(t(g)===-1?0:t(g))}function ut(){a(k,t(k)==="none"?"one":t(k)==="one"?"all":"none")}function ct(){a(b,t(b)==="eng"?"kor":t(b)==="kor"?"both":"eng")}function vt(){a(B,!t(B)),t(B)?(U=[...t(f)],a(f,t(f).map(e=>{const s=e.split(" "),v=s.length,M=v<=2?1:v>=10?3:2,u=[];for(;u.length<M;){const i=Math.floor(Math.random()*v);u.includes(i)||u.push(i)}return u.forEach(i=>s[i]="____"),s.join(" ")}))):a(f,[...U])}function dt(){a(m,t(m)==="both"?"hideKor":t(m)==="hideKor"?"hideEng":"both")}function ft(){a(w,(t(w)+1)%P.length)}function pt(){a(C,!t(C))}j(()=>F(),()=>{var e;a(A,((e=F().url.pathname.match(/\/sentence\/([^\/]+)/))==null?void 0:e[1])||"")}),j(()=>t(A),()=>{a(N,`${Nt}/assets/sentence/${t(A)}`)}),j(()=>t(m),()=>{a(H,t(m)==="both"?"한/영":t(m)==="hideKor"?"영":"한")}),j(()=>t(b),()=>{a(J,t(b)==="eng"?"영":t(b)==="kor"?"한":"모두")}),j(()=>t(r),()=>{t(r)&&rt()}),Mt(),Gt();var X=zt(),Q=tt(X),_t=n(Q);{var mt=e=>{var s=wt(),v=tt(s);jt(v,1,()=>t(f),At,(M,u,i)=>{var c=Pt();Bt(c,"id",`s-${i}`);var L=n(c),y=n(L);y.textContent=`${i+1}.`;var D=d(y,2),p=n(D);let R;var S=n(p,!0);l(p);var T=d(p,2);let Z;var kt=n(T,!0);l(T),l(D),l(L),l(c),V((yt,$t)=>{z(c,1,`sent ${i===t(g)?"active":""}`,"svelte-u34xuu"),R=z(p,1,"text svelte-u34xuu",null,R,yt),_(S,t(u)),Z=z(T,1,"kor svelte-u34xuu",null,Z,$t),_(kt,t(O)[i])},[()=>({hidden:t(m)==="hideEng"}),()=>({hidden:t(m)==="hideKor"})],Kt),h("click",c,()=>G(i)),K(M,c)}),K(e,s)},bt=e=>{var s=Qt();K(e,s)};at(_t,e=>{t(f).length?e(mt):e(bt,!1)})}l(Q);var Y=d(Q,2);{var ht=e=>{var s=Vt(),v=n(s),M=n(v,!0);l(v);var u=d(v,2),i=n(u);l(u);var c=d(u,2),L=n(c,!0);l(c);var y=d(c,2),D=n(y,!0);l(y);var p=d(y,2),R=n(p);l(p);var S=d(p,2),T=n(S);l(S),l(s),V(()=>{_(M,t(x)?"⏸":"▶"),_(i,`반복:${t(k)==="none"?"없음":t(k)==="one"?"문장":"전체"}`),_(L,t(H)),_(D,t(B)?"원문 보기":"빈칸"),_(R,`음성:${t(J)??""}`),_(T,`간격:${t(w)===0?"즉시":`${P[t(w)]/1e3}초`}`)}),h("click",v,it),h("click",u,ut),h("click",c,dt),h("click",y,vt),h("click",p,ct),h("click",S,ft),K(e,s)};at(Y,e=>{t(C)&&e(ht)})}var I=d(Y,2),gt=n(I,!0);l(I);var xt=d(I,2);Ct(xt,e=>a(r,e),()=>t(r)),V(()=>_(gt,t(C)?"▽":"▲")),h("click",I,pt),K(st,X),St(),lt()}export{oe as component};
