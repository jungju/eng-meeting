import{t as C,e as f,a as j,s as d,c as ft}from"../chunks/Db9VB6BF.js";import"../chunks/CFaWhUhs.js";import{a3 as _t,a4 as L,a5 as bt,a6 as N,t as O,a7 as gt,a8 as u,c as n,g as t,m as l,s as a,r,a9 as ht,I as xt}from"../chunks/C3080PXC.js";import{i as kt}from"../chunks/BZmyWsR4.js";import{e as $t,i as yt}from"../chunks/CatFw3ce.js";import{s as zt}from"../chunks/CxDZ-_MN.js";import{s as Q}from"../chunks/DWbnnoIW.js";import{i as wt}from"../chunks/C6SzvuW1.js";import{s as St,a as Et}from"../chunks/TMD8qa7b.js";import{o as Mt,a as jt}from"../chunks/BywZxHrF.js";import{p as At}from"../chunks/Cpm8YVw6.js";import{b as Bt}from"../chunks/BJchYXKK.js";var It=C('<div><div class="line svelte-1m1v1z6"><div class="idx svelte-1m1v1z6"></div> <div class="content svelte-1m1v1z6"><div> </div> <div class="kor svelte-1m1v1z6"> </div></div></div></div>'),qt=C('<p class="loading svelte-1m1v1z6">문장 데이터를 불러오는 중입니다...</p>'),Ct=C('<div class="list svelte-1m1v1z6"><!></div> <div class="controls svelte-1m1v1z6"><button> </button> <button> </button> <button> </button> <button> </button> <button> </button></div>',1);function Ot(U,W){_t(W,!1);const[X,Y]=St(),D=()=>Et(At,"$page",X),x=l(),A=l();let v=l([]),H=l([]),_=l(-1),o,b=l(!1),c=l("none"),k=l(!1),$=l(!1),y=l(!1),P=[];Mt(async()=>{if(!t(x))return;const e=await fetch(`${t(A)}/sentences.json`);if(e.ok){const s=await e.json();a(v,s.sentences),a(H,s.korean)}}),jt(()=>{o==null||o.pause()});async function g(e){var s;e<0||e>=t(v).length||(a(_,e),await ht(),(s=document.getElementById(`s-${e}`))==null||s.scrollIntoView({behavior:"smooth",block:"center"}),o==null||o.pause(),o=new Audio(`${t(A)}/audio/${String(e+1).padStart(2,"0")}.mp3`),o.onended=()=>t(c)==="one"?g(t(_)):t(_)<t(v).length-1?g(t(_)+1):t(c)==="all"?g(0):a(b,!1),a(b,!0),o.play())}function Z(){o?o.paused?(o.play(),a(b,!0)):(o.pause(),a(b,!1)):g(0)}function tt(){a(c,t(c)==="none"?"one":t(c)==="one"?"all":"none")}function et(){a(k,!t(k))}function at(){a($,!t($))}function st(){a(y,!t(y)),t(y)?(P=[...t(v)],a(v,t(v).map(e=>{const s=e.split(" "),h=s.length,q=h<=2?1:h>=10?3:2,m=[];for(;m.length<q;){const i=Math.floor(Math.random()*h);m.includes(i)||m.push(i)}return m.forEach(i=>s[i]="____"),s.join(" ")}))):a(v,[...P])}L(()=>D(),()=>{var e;a(x,((e=D().url.pathname.match(/\/sentence\/([^\/]+)/))==null?void 0:e[1])||"")}),L(()=>t(x),()=>{a(A,`${Bt}/assets/sentence/${t(x)}`)}),bt(),wt();var R=Ct(),B=N(R),ot=n(B);{var nt=e=>{var s=ft(),h=N(s);$t(h,1,()=>t(v),yt,(q,m,i)=>{var p=It();zt(p,"id",`s-${i}`);var V=n(p),F=n(V);F.textContent=`${i+1}.`;var G=u(F,2),M=n(G);let J;var ut=n(M,!0);r(M);var K=u(M,2),mt=n(K,!0);r(K),r(G),r(V),r(p),O(pt=>{Q(p,1,`sent ${i===t(_)?"active":""}`,"svelte-1m1v1z6"),J=Q(M,1,"text svelte-1m1v1z6",null,J,pt),d(ut,t(m)),d(mt,t(H)[i])},[()=>({large:t(k),hidden:t($)})],xt),f("click",p,()=>g(i)),j(q,p)}),j(e,s)},rt=e=>{var s=qt();j(e,s)};kt(ot,e=>{t(v).length?e(nt):e(rt,!1)})}r(B);var T=u(B,2),z=n(T),it=n(z,!0);r(z);var w=u(z,2),lt=n(w);r(w);var S=u(w,2),vt=n(S,!0);r(S);var E=u(S,2),ct=n(E,!0);r(E);var I=u(E,2),dt=n(I,!0);r(I),r(T),O(()=>{d(it,t(b)?"⏸":"▶"),d(lt,`반복:${t(c)==="none"?"없음":t(c)==="one"?"한 문장":"전체"}`),d(vt,t(k)?"기본크기":"글자 크게"),d(ct,t($)?"영어 보이기":"영어 숨기기"),d(dt,t(y)?"원문 보기":"빈칸 만들기")}),f("click",z,Z),f("click",w,tt),f("click",S,et),f("click",E,at),f("click",I,st),j(U,R),gt(),Y()}export{Ot as component};
