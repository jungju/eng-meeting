import{t as M,e as q,a as v,s as g,b as E,c as Ee}from"../chunks/COMqp8kh.js";import"../chunks/DwxwvPS7.js";import{a3 as Ge,a6 as be,t as x,a7 as Je,a8 as k,I as G,g as e,c as i,s as n,m as _,r as c,ab as he}from"../chunks/BkdumivH.js";import{i as J}from"../chunks/CiZIvcdN.js";import{e as K,i as L}from"../chunks/BTCzXXE8.js";import{s as O}from"../chunks/C9c2cQCK.js";import{i as Ke}from"../chunks/CzMeScZB.js";import{o as Le}from"../chunks/DiGSb2uk.js";var Ne=M('<th class="svelte-eusvf2"> </th>'),Re=M("<td><!></td>"),Ue=M('<tr><td class="svelte-eusvf2"> </td><!></tr>'),Ve=M('<div style="overflow-x:auto"><table class="svelte-eusvf2"><thead><tr><th class="svelte-eusvf2">Subject</th><!></tr></thead><tbody></tbody></table></div>'),Xe=M('<p style="margin-bottom: 120px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Ze=M("<button> </button>"),et=M('<!> <div class="footer svelte-eusvf2"><button class="info-btn svelte-eusvf2">Info</button> <div style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center;"></div> <div style="display:flex; gap:12px;"><button> </button> <button>Q1</button> <button> </button></div></div>',1);function it(me,ge){Ge(ge,!1);let ae=_([]),S=_([]),N=[],b=_(""),y=_(""),s,l=_(""),w=_(null),h=_({c:0,t:0}),A=null,o=_(null),P=_(!1),m=_(!1),F=0;const xe=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],ke=["I","You","He","We","They"],R=async t=>{const a=await fetch(t);return a.ok?await a.json():[]};Le(async()=>{n(ae,await R("/assets/tense/info.json")),await Y("sentences1-1.json")});async function Y(t,a){const r=await R(`/assets/tense/${t}`);if(!r.length)return alert(`fail ${t}`);N=await R(`/assets/tense/${t.replace("-1.json","-2.json")}`),n(S,r),n(b,t),n(y,t.replace("sentences","").replace(".json","")),s==null||s.pause(),n(w,null),n(l,""),n(h,{c:0,t:0}),A=null,n(o,null),n(P,!1),n(m,!1)}const ye=t=>(e(P)&&N.length?N:e(S)).slice(t*9,t*9+9);function we(t){const a=t.replace(/\.$/,"").split(" ");return a.length<3?t:`${a[0]} ${a.slice(1,-1).map(r=>"_".repeat(r.length)).join(" ")} ${a[a.length-1]}`}const Pe=t=>{e(l)||!e(y).endsWith("-1")||(s==null||s.pause(),s=new Audio(`/assets/tense/audio/${e(y)}-${t+1}.mp3`),n(w,t),s.onended=()=>n(w,null),s.play().catch(()=>{}))};function ne(){if(!e(m)||F>=e(S).length){n(m,!1),n(w,null);return}s==null||s.pause(),s=new Audio(`/assets/tense/audio/${e(y)}-${F+1}.mp3`),n(w,F),s.onended=()=>{F++,ne()},s.play().catch(()=>{})}function We(){if(e(m)){s==null||s.pause(),n(m,!1),n(w,null);return}e(b).startsWith("tense_info")||e(l)||!e(y).endsWith("-1")||(n(m,!0),F=0,ne())}const Me=()=>{n(l,"blank"),n(o,null)},$e=()=>{if(e(l)==="guess"){s==null||s.pause(),s&&(s.currentTime=0,s.play().catch(()=>{}));return}n(P,!1),n(l,"guess"),n(h,{c:0,t:0}),le()};function le(){n(o,null);const t=Math.floor(Math.random()*5)+1,a=Math.floor(Math.random()*2)+1,r=Math.floor(Math.random()*45)+1;A=r-1,he(h,e(h).t++),s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t}-${a}-${r}.mp3`),s.play().catch(()=>{})}function Ie(t,a){if(e(l)!=="guess"||A===null)return;const r=Math.floor(A/9),f=A%9,d=t===r&&a===f;d&&he(h,e(h).c++),n(o,{r:t,c:a,x:d,cr:r,cc:f}),setTimeout(le,800)}Ke();var re=et(),oe=be(re);{var je=t=>{var a=Ve(),r=i(a),f=i(r),d=i(f),V=k(i(d));K(V,1,()=>xe,L,(X,Z)=>{var u=Ne(),Q=i(u,!0);c(u),x(()=>g(Q,e(Z))),v(X,u)}),c(d),c(f);var _e=k(f);K(_e,5,()=>ke,L,(X,Z,u)=>{var Q=Ue(),ee=i(Q),Qe=i(ee,!0);c(ee);var Te=k(ee);K(Te,1,()=>ye(u),L,(He,te,W)=>{var T=Re();let de;var Oe=i(T);{var Se=p=>{var C=E();x(se=>g(C,se),[()=>we(e(te))],G),v(p,C)},Ye=(p,C)=>{{var se=I=>{var H=Ee(),Be=be(H);{var Ce=j=>{var D=E();x(()=>g(D,e(te))),v(j,D)},De=j=>{var D=E("?");v(j,D)};J(Be,j=>{e(o)&&!e(o).x&&e(o).cr===u&&e(o).cc===W?j(Ce):j(De,!1)})}v(I,H)},ze=I=>{var H=E();x(()=>g(H,e(te))),v(I,H)};J(p,I=>{e(l)==="guess"?I(se):I(ze,!1)},C)}};J(Oe,p=>{e(l)==="blank"?p(Se):p(Ye,!1)})}c(T),x(p=>de=O(T,1,"svelte-eusvf2",null,de,p),[()=>{var p;return{click:!e(l)&&e(y).endsWith("-1"),play:!e(l)&&e(w)===u*9+W,blank:e(l)==="blank",ok:e(l)==="guess"&&((p=e(o))==null?void 0:p.x)&&e(o).r===u&&e(o).c===W,no:e(l)==="guess"&&e(o)&&!e(o).x&&e(o).r===u&&e(o).c===W,ans:e(l)==="guess"&&e(o)&&!e(o).x&&e(o).cr===u&&e(o).cc===W}}],G),q("click",T,()=>{e(l)?e(l)==="guess"&&Ie(u,W):Pe(u*9+W)}),v(He,T)}),c(Q),x(()=>g(Qe,e(Z))),v(X,Q)}),c(_e),c(r),c(a),v(t,a)},qe=t=>{var a=Xe();v(t,a)};J(oe,t=>{e(S).length?t(je):t(qe,!1)})}var ce=k(oe,2),ie=i(ce),U=k(ie,2);K(U,5,()=>e(ae),L,(t,a)=>{var r=Ze();let f;var d=i(r,!0);c(r),x(V=>{f=O(r,1,"svelte-eusvf2",null,f,V),g(d,e(a).base)},[()=>({active:!e(l)&&e(b)===e(a).file_en,korean:!e(l)&&e(b)===e(a).file_en&&e(P)})],G),q("click",r,()=>{e(b)===e(a).file_en&&!e(l)?n(P,!e(P)):(n(P,!1),Y(e(a).file_en,e(a).base))}),v(t,r)}),c(U);var ue=k(U,2),$=i(ue);let ve;var Ae=i($,!0);c($);var z=k($,2);let fe;var B=k(z,2);let pe;var Fe=i(B,!0);c(B),c(ue),c(ce),x((t,a,r,f,d)=>{$.disabled=t,ve=O($,1,"svelte-eusvf2",null,ve,a),g(Ae,e(m)?"⏸":"▶"),z.disabled=r,fe=O(z,1,"svelte-eusvf2",null,fe,f),pe=O(B,1,"svelte-eusvf2",null,pe,d),g(Fe,e(l)==="guess"?`${e(h).c}/${e(h).t}`:"Q2")},[()=>e(b).startsWith("tense_info")||e(l)||!e(y).endsWith("-1"),()=>({active:e(m)}),()=>e(b).startsWith("tense_info"),()=>({active:e(l)==="blank"}),()=>({active:e(l)==="guess"})],G),q("click",ie,()=>e(b).startsWith("tense_info1")?Y("tense_info2.json"):Y("tense_info1.json")),q("click",$,We),q("click",z,Me),q("click",B,$e),v(me,re),Je()}export{it as component};
