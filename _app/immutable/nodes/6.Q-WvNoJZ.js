import{t as y,e as g,a as k,s as W}from"../chunks/80LxVKeV.js";import"../chunks/CFaWhUhs.js";import{a3 as Tt,a6 as Qt,t as Q,a7 as Ht,a8 as f,c as i,I as U,g as t,s as l,m as u,r as o,ab as ft}from"../chunks/C3080PXC.js";import{i as Ot}from"../chunks/BZmyWsR4.js";import{e as E,i as G}from"../chunks/CatFw3ce.js";import{s as x}from"../chunks/DWbnnoIW.js";import{i as St}from"../chunks/C6SzvuW1.js";import{o as Yt}from"../chunks/BywZxHrF.js";var zt=y('<th class="svelte-h40443"> </th>'),Bt=y("<td> </td>"),Ct=y('<tr><td class="svelte-h40443"> </td><!></tr>'),Dt=y('<div style="overflow-x:auto"><table class="svelte-h40443"><thead><tr><th class="svelte-h40443">Subject</th><!></tr></thead><tbody></tbody></table></div>'),Et=y('<p style="margin-bottom:80px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Gt=y("<button> </button>"),Jt=y('<!><div class="footer svelte-h40443"><div class="left-controls"><button>Info</button></div><div class="mid-controls" style="display:flex;gap:8px;align-items:center"></div><div class="right-controls" style="display:flex;gap:8px;align-items:center"><button>한글</button><button> </button><button>Q1</button><button> </button></div></div>',1);function te(ht,dt){Tt(dt,!1);let V=u([]),H=u([]),O=u([]),h=u(""),b=u(""),s,n=u(""),m=u(null),d=u({c:0,t:0}),M=null,c=u(null),$=u(!1),p=u(!1),j=0;const pt=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],_t=["I","You","He","We","They"],J=async e=>{const a=await fetch(e);return a.ok?await a.json():[]};Yt(async()=>{l(V,await J("/assets/tense/info.json")),await S("sentences1-1.json")});async function S(e,a){const r=await J(`/assets/tense/${e}`);if(!r.length)return alert(`fail ${e}`);l(O,await J(`/assets/tense/${e.replace("-1.json","-2.json")}`)),l(H,r),l(h,e),l(b,e.replace("sentences","").replace(".json","")),s==null||s.pause(),l(m,null),l(n,""),l(d,{c:0,t:0}),M=null,l(c,null),l($,!1),l(p,!1)}const bt=e=>(t($)&&t(O).length?t(O):t(H)).slice(e*9,e*9+9),mt=e=>{t(n)||!t(b).endsWith("-1")||(s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(b)}-${e+1}.mp3`),l(m,e),s.onended=()=>l(m,null),s.play().catch(()=>{}))},gt=()=>{l(n,"blank"),l(c,null)},X=()=>{if(!t(p)||j>=t(H).length){l(p,!1),l(m,null);return}s==null||s.pause(),s=new Audio(`/assets/tense/audio/${t(b)}-${j+1}.mp3`),l(m,j),s.onended=()=>{j++,X()},s.play().catch(()=>{})},kt=()=>{if(t(p)){s==null||s.pause(),l(p,!1),l(m,null);return}t(h).startsWith("tense_info")||t(n)||!t(b).endsWith("-1")||(l(p,!0),j=0,X())},xt=()=>{if(t(n)==="guess"){s==null||s.pause(),s&&(s.currentTime=0,s.play().catch(()=>{}));return}l($,!1),l(n,"guess"),l(d,{c:0,t:0}),Z()},Z=()=>{l(c,null);const e=Math.floor(Math.random()*5)+1,a=Math.floor(Math.random()*2)+1,r=Math.floor(Math.random()*45)+1;M=r-1,ft(d,t(d).t++),s==null||s.pause(),s=new Audio(`/assets/tense/audio/${e}-${a}-${r}.mp3`),s.play().catch(()=>{})},yt=(e,a)=>{if(t(n)!=="guess"||M===null)return;const r=e===Math.floor(M/9)&&a===M%9;r&&ft(d,t(d).c++),l(c,{r:e,c:a,x:r}),setTimeout(Z,500)},$t=e=>{const a=e.replace(/\.$/,"").split(" ");return a.length<3?e:`${a[0]} ${a.slice(1,-1).map(r=>"_".repeat(r.length)).join(" ")} ${a[a.length-1]}`};St();var tt=Jt(),et=Qt(tt);{var Pt=e=>{var a=Dt(),r=i(a),_=i(r),w=i(_),I=f(i(w));E(I,1,()=>pt,G,(q,N)=>{var v=zt(),A=i(v,!0);o(v),Q(()=>W(A,t(N))),k(q,v)}),o(w),o(_);var C=f(_);E(C,5,()=>_t,G,(q,N,v)=>{var A=Ct(),R=i(A),jt=i(R,!0);o(R);var It=f(R);E(It,1,()=>bt(v),G,(qt,ut,F)=>{var T=Bt();let vt;var At=i(T,!0);o(T),Q((D,Ft)=>{vt=x(T,1,"svelte-h40443",null,vt,D),W(At,Ft)},[()=>{var D;return{click:!t(n)&&t(b).endsWith("-1"),play:!t(n)&&t(m)===v*9+F,blank:t(n)==="blank",ok:t(n)==="guess"&&((D=t(c))==null?void 0:D.x)&&t(c).r===v&&t(c).c===F,no:t(n)==="guess"&&t(c)&&t(c).x===!1&&t(c).r===v&&t(c).c===F}},()=>t(n)==="blank"?$t(t(ut)):t(n)==="guess"?"?":t(ut)],U),g("click",T,()=>{t(n)?t(n)==="guess"&&yt(v,F):mt(v*9+F)}),k(qt,T)}),o(A),Q(()=>W(jt,t(N))),k(q,A)}),o(C),o(r),o(a),k(e,a)},wt=e=>{var a=Et();k(e,a)};Ot(et,e=>{t(H).length?e(Pt):e(wt,!1)})}var st=f(et),K=i(st),at=i(K);let lt;o(K);var L=f(K);E(L,5,()=>t(V),G,(e,a)=>{var r=Gt();let _;var w=i(r,!0);o(r),Q(I=>{_=x(r,1,"svelte-h40443",null,_,I),W(w,t(a).base)},[()=>({active:!t(n)&&t(h)===t(a).file_en})],U),g("click",r,()=>S(t(a).file_en,t(a).base)),k(e,r)}),o(L);var nt=f(L),Y=i(nt);let rt;var P=f(Y);let ot;var Wt=i(P,!0);o(P);var z=f(P);let it;var B=f(z);let ct;var Mt=i(B,!0);o(B),o(nt),o(st),Q((e,a,r,_,w,I,C,q)=>{lt=x(at,1,"svelte-h40443",null,lt,e),Y.disabled=a,rt=x(Y,1,"svelte-h40443",null,rt,r),P.disabled=_,ot=x(P,1,"svelte-h40443",null,ot,w),W(Wt,t(p)?"⏸":"▶"),z.disabled=I,it=x(z,1,"svelte-h40443",null,it,C),ct=x(B,1,"svelte-h40443",null,ct,q),W(Mt,t(n)==="guess"?`${t(d).c}/${t(d).t}`:"Q2")},[()=>({active:t(h).startsWith("tense_info")}),()=>!t(O).length||t(h).startsWith("tense_info")||t(n),()=>({active:t($)}),()=>t(h).startsWith("tense_info")||t(n)||!t(b).endsWith("-1"),()=>({active:t(p)}),()=>t(h).startsWith("tense_info"),()=>({active:t(n)==="blank"}),()=>({active:t(n)==="guess"})],U),g("click",at,()=>t(h).startsWith("tense_info1")?S("tense_info2.json"):S("tense_info1.json")),g("click",Y,()=>l($,!t($))),g("click",P,kt),g("click",z,gt),g("click",B,xt),k(ht,tt),Ht()}export{te as component};
