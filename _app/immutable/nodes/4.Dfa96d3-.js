import{t as N,e as A,a as $,s as S,c as Q}from"../chunks/DfUXeZ-5.js";import"../chunks/Z63rKETv.js";import{h as P,a3 as U,a7 as W,a8 as X,a4 as R,t as T,a5 as Y,c as m,a6 as E,g as e,o as _,q as i,r as d,aa as Z}from"../chunks/BPJHTBRA.js";import{i as j}from"../chunks/Cvb-CQeK.js";import{e as ee,s as te,i as se}from"../chunks/BS96BxpA.js";import{a as ae}from"../chunks/BQs9fFl7.js";import{i as re}from"../chunks/BKq92E10.js";import{s as ne,a as oe}from"../chunks/DGrsAw3I.js";import{o as ie}from"../chunks/C9_AoXr8.js";import{p as le}from"../chunks/BvZZmgJ8.js";function ce(n,x,f,y,k,l){var v=n.__className;if(P||v!==f||v===void 0){var s=ae(f,y);(!P||s!==n.getAttribute("class"))&&(s==null?n.removeAttribute("class"):n.className=s),n.__className=f}return l}var pe=N('<div><div class="idx svelte-136sr6h"></div><div> </div></div>'),fe=N('<p class="loading svelte-136sr6h">문장 데이터를 불러오는 중입니다...</p>'),ve=N('<!> <div class="ctrls svelte-136sr6h"><button class="svelte-136sr6h"> </button> <button class="svelte-136sr6h"> </button></div>',1);function we(n,x){U(x,!1);const[f,y]=ne(),k=()=>oe(le,"$page",f),l=_(),v="/assets/sentence";let s=_([]),c=_(-1),a,g=_(!1),o=_("none");ie(async()=>{if(!e(l))return;const t=await fetch(`${v}/${e(l)}/sentences.json`);if(t.ok){const r=await t.json();i(s,r.sentences)}});async function u(t){var r;t<0||t>=e(s).length||(i(c,t),await Z(),(r=document.getElementById(`s-${t}`))==null||r.scrollIntoView({behavior:"smooth",block:"center"}),a==null||a.pause(),a=new Audio(`${v}/${e(l)}/audio/${String(t+1).padStart(2,"0")}.mp3`),a.play(),i(g,!0),a.onended=()=>{e(o)==="one"?u(e(c)):e(o)==="all"?u((e(c)+1)%e(s).length):e(c)<e(s).length-1?u(e(c)+1):i(g,!1)})}function V(){a?i(g,a.paused?(a.play(),!0):(a.pause(),!1)):e(s).length&&u(0)}function z(){i(o,e(o)==="none"?"one":e(o)==="one"?"all":"none")}W(()=>k(),()=>{i(l,(()=>{const t=k().url.pathname.match(/\/sentence\/([^\/]+)/);return t?t[1]:""})())}),X(),re();var B=ve(),I=R(B);{var D=t=>{var r=Q(),J=R(r);ee(J,1,()=>e(s),se,(K,L,b)=>{var p=pe();te(p,"id",`s-${b}`);var C=m(p);C.textContent=b+1;var M=E(C),O=m(M,!0);d(M),d(p),T(()=>{ce(p,1,`sent ${b===e(c)?"active":""}`,"svelte-136sr6h"),S(O,e(L))}),A("click",p,()=>u(b)),$(K,p)}),$(t,r)},F=t=>{var r=fe();$(t,r)};j(I,t=>{e(s).length?t(D):t(F,!1)})}var q=E(I,2),h=m(q),G=m(h,!0);d(h);var w=E(h,2),H=m(w);d(w),d(q),T(()=>{S(G,e(g)?"⏸️ 일시정지":"▶️ 재생"),S(H,`🔁 반복 모드: ${e(o)==="none"?"없음":e(o)==="one"?"한 문장":"전체"}`)}),A("click",h,V),A("click",w,z),$(n,B),Y(),y()}export{we as component};
