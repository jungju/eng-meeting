import{t as R,e as b,a as w,s as f,c as Mt}from"../chunks/CMrKsAIM.js";import"../chunks/BmGMRanT.js";import{a9 as jt,g as t,m as tt,ab as D,ac as Bt,f as et,t as L,ad as At,a as r,l as s,s as d,af as Dt,c as i,r as o,R as at}from"../chunks/Btjerwqt.js";import{i as It}from"../chunks/3CCI0ror.js";import{e as st,i as ot}from"../chunks/Dg5wf27x.js";import{s as Rt}from"../chunks/CFkFE66I.js";import{s as I}from"../chunks/BZm7i61A.js";import{b as Tt}from"../chunks/D-3x-aaD.js";import{i as qt}from"../chunks/Bn3qeioi.js";import{s as zt,a as Ct}from"../chunks/Bqr_BXZZ.js";import{o as Gt,a as Lt}from"../chunks/DDGzSC41.js";import{p as Pt}from"../chunks/Cd0sLdMw.js";import{b as Vt}from"../chunks/CeGwWMwr.js";var Ft=R('<div><div class="line svelte-10xgwr7"><div class="idx svelte-10xgwr7"></div> <div class="content svelte-10xgwr7"><div> </div> <div> </div></div></div></div>'),Ht=R('<p class="loading svelte-10xgwr7">문장 데이터를 불러오는 중입니다...</p>'),Jt=R("<button> </button>"),Nt=R('<div class="list svelte-10xgwr7"><!></div> <div class="controls svelte-10xgwr7"><button> </button> <button> </button> <button> </button> <button> </button> <button> </button> <div class="gap-group svelte-10xgwr7"></div></div> <audio playsinline="" preload="auto" style="display:none"></audio>',1);function re(nt,rt){jt(rt,!1);const[it,lt]=zt(),P=()=>Ct(Pt,"$page",it),k=r(),T=r(),V=r();let v=r([]),F=r([]),_=r(-1),n=r(),m=r(!1),g=r("none"),$=r(!1),E=r(!1),H=[];const J=[0,1e3,3e3,5e3];let q=r(J[0]),u=r("both");Gt(async()=>{if(!t(k))return;const e=await fetch(`${t(T)}/sentences.json`);if(e.ok){const a=await e.json();s(v,a.sentences),s(F,a.korean)}}),Lt(()=>{var e;return(e=t(n))==null?void 0:e.pause()});async function y(e){var a;if(!(e<0||e>=t(v).length)){s(_,e),await Dt(),(a=document.getElementById(`s-${e}`))==null||a.scrollIntoView({behavior:"smooth",block:"center"}),t(n).pause(),tt(n,t(n).src=`${t(T)}/audio/${String(e+1).padStart(2,"0")}.mp3`);try{await t(n).play()}catch{s(m,!1);return}s(m,!0)}}N();function N(){t(n)&&tt(n,t(n).onended=()=>{setTimeout(()=>{t(g)==="one"?y(t(_)):t(_)<t(v).length-1?y(t(_)+1):t(g)==="all"?y(0):s(m,!1)},t(q))})}function ct(){t(m)?t(n).pause():y(t(_)===-1?0:t(_)),s(m,!t(m))}function vt(){s(g,t(g)==="none"?"one":t(g)==="one"?"all":"none")}function dt(){s($,!t($))}function ut(){s(E,!t(E)),t(E)?(H=[...t(v)],s(v,t(v).map(e=>{const a=e.split(" "),c=a.length,h=c<=2?1:c>=10?3:2,p=[];for(;p.length<h;){const l=Math.floor(Math.random()*c);p.includes(l)||p.push(l)}return p.forEach(l=>a[l]="____"),a.join(" ")}))):s(v,[...H])}function pt(){s(u,t(u)==="both"?"hideKor":t(u)==="hideKor"?"hideEng":"both")}function ft(e){s(q,e)}D(()=>P(),()=>{var e;s(k,((e=P().url.pathname.match(/\/sentence\/([^\/]+)/))==null?void 0:e[1])||"")}),D(()=>t(k),()=>{s(T,`${Vt}/assets/sentence/${t(k)}`)}),D(()=>t(u),()=>{s(V,t(u)==="both"?"한글 숨기기":t(u)==="hideKor"?"영어 숨기기":"기본 보기")}),D(()=>t(n),()=>{t(n)&&N()}),Bt(),qt();var O=Nt(),z=et(O),_t=i(z);{var mt=e=>{var a=Mt(),c=et(a);st(c,1,()=>t(v),ot,(h,p,l)=>{var x=Ft();Rt(x,"id",`s-${l}`);var U=i(x),W=i(U);W.textContent=`${l+1}.`;var X=d(W,2),A=i(X);let Y;var $t=i(A,!0);o(A);var G=d(A,2);let Z;var Et=i(G,!0);o(G),o(X),o(U),o(x),L((St,Kt)=>{I(x,1,`sent ${l===t(_)?"active":""}`,"svelte-10xgwr7"),Y=I(A,1,"text svelte-10xgwr7",null,Y,St),f($t,t(p)),Z=I(G,1,"kor svelte-10xgwr7",null,Z,Kt),f(Et,t(F)[l])},[()=>({large:t($),hidden:t(u)==="hideEng"}),()=>({hidden:t(u)==="hideKor"})],at),b("click",x,()=>y(l)),w(h,x)}),w(e,a)},gt=e=>{var a=Ht();w(e,a)};It(_t,e=>{t(v).length?e(mt):e(gt,!1)})}o(z);var C=d(z,2),S=i(C),bt=i(S,!0);o(S);var K=d(S,2),ht=i(K);o(K);var M=d(K,2),xt=i(M,!0);o(M);var j=d(M,2),yt=i(j,!0);o(j);var B=d(j,2),wt=i(B,!0);o(B);var Q=d(B,2);st(Q,5,()=>J,ot,(e,a)=>{var c=Jt();let h;var p=i(c,!0);o(c),L(l=>{h=I(c,1,"svelte-10xgwr7",null,h,l),f(p,t(a)===0?"즉시":`${t(a)/1e3}초`)},[()=>({selected:t(q)===t(a)})],at),b("click",c,()=>ft(t(a))),w(e,c)}),o(Q),o(C);var kt=d(C,2);Tt(kt,e=>s(n,e),()=>t(n)),L(()=>{f(bt,t(m)?"⏸":"▶"),f(ht,`반복:${t(g)==="none"?"없음":t(g)==="one"?"한 문장":"전체"}`),f(xt,t($)?"기본크기":"글자 크게"),f(yt,t(V)),f(wt,t(E)?"원문 보기":"빈칸 만들기")}),b("click",S,ct),b("click",K,vt),b("click",M,dt),b("click",j,pt),b("click",B,ut),w(nt,O),At(),lt()}export{re as component};
