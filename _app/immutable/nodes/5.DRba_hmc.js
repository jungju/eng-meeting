import{t as R,e as b,a as w,s as u,c as Dt}from"../chunks/C84cx4to.js";import"../chunks/Cz3YCu0P.js";import{a9 as It,aa as E,ab as Rt,f as lt,t as V,ac as zt,a as o,s as c,c as n,g as t,l as a,r as l,m as nt,ae as Ct,R as it}from"../chunks/CWJw-b4-.js";import{i as Nt}from"../chunks/KPcsEuus.js";import{e as rt,i as dt}from"../chunks/DLP_h01C.js";import{s as Pt}from"../chunks/DmHdXTYY.js";import{s as I}from"../chunks/DMbZqknN.js";import{b as Qt}from"../chunks/CV8ZBm2l.js";import{i as Vt}from"../chunks/VsyBG53z.js";import{s as Ft,a as Ht}from"../chunks/V4_yusMK.js";import{o as Jt,a as Ot}from"../chunks/xR0fCDvz.js";import{p as Ut}from"../chunks/CQ72nSq9.js";import{b as Wt}from"../chunks/mdB561w1.js";var Xt=R('<div><div class="line svelte-d99mqd"><div class="idx svelte-d99mqd"></div> <div class="content svelte-d99mqd"><div> </div> <div> </div></div></div></div>'),Yt=R('<p class="loading svelte-d99mqd">문장 데이터를 불러오는 중입니다...</p>'),Zt=R("<button> </button>"),te=R('<div class="list svelte-d99mqd"><!></div> <div class="controls svelte-d99mqd"><button class="play-btn svelte-d99mqd"> </button> <button class="svelte-d99mqd"> </button> <button class="svelte-d99mqd"> </button> <button class="svelte-d99mqd"> </button> <button class="svelte-d99mqd"> </button> <button class="svelte-d99mqd"> </button> <div class="gap-group svelte-d99mqd"></div></div> <audio playsinline="" preload="auto" style="display:none"></audio>',1);function me(ct,vt){It(vt,!1);const[ut,pt]=Ft(),F=()=>Ht(Ut,"$page",ut),M=o(),z=o(),H=o(),J=o();let v=o([]),O=o([]),p=o(-1),i=o(),h=o(!1),S=o("all"),q=o(!1),T=o(!1),U=[],g=null;const W=[0,1e3,3e3,5e3];let C=o(W[0]),m=o("both"),f=o("eng");Jt(async()=>{if(!t(M))return;const e=await fetch(`${t(z)}/sentences.json`);if(e.ok){const s=await e.json();a(v,s.sentences),a(O,s.korean)}}),Ot(()=>{var e;(e=t(i))==null||e.pause(),g&&clearTimeout(g)});let x=[];async function $(e){var s;e<0||e>=t(v).length||(a(p,e),await Ct(),(s=document.getElementById(`s-${e}`))==null||s.scrollIntoView({behavior:"smooth",block:"center"}),x=t(f)==="both"?["audio","audiok"]:t(f)==="kor"?["audiok"]:["audio"],await X())}async function X(){if(!x.length){a(h,!1);return}const e=x.shift();t(i).pause(),nt(i,t(i).src=`${t(z)}/${e}/${String(t(p)+1).padStart(2,"0")}.mp3`);try{await t(i).play(),a(h,!0)}catch{a(h,!1)}}function mt(){nt(i,t(i).onended=()=>{g=setTimeout(async()=>{if(x.length){await X();return}t(S)==="one"?$(t(p)):t(p)<t(v).length-1?$(t(p)+1):$(0)},t(C))})}function ft(){t(h)?(t(i).pause(),a(h,!1),x=[],g&&(clearTimeout(g),g=null)):$(t(p)===-1?0:t(p))}function _t(){a(S,t(S)==="all"?"one":"all")}function bt(){a(q,!t(q))}function ht(){a(f,t(f)==="eng"?"kor":t(f)==="kor"?"both":"eng")}function gt(){a(T,!t(T)),t(T)?(U=[...t(v)],a(v,t(v).map(e=>{const s=e.split(" "),d=s.length,k=d<=2?1:d>=10?3:2,_=[];for(;_.length<k;){const r=Math.floor(Math.random()*d);_.includes(r)||_.push(r)}return _.forEach(r=>s[r]="____"),s.join(" ")}))):a(v,[...U])}function kt(){a(m,t(m)==="both"?"hideKor":t(m)==="hideKor"?"hideEng":"both")}function yt(e){a(C,e)}E(()=>F(),()=>{var e;a(M,((e=F().url.pathname.match(/\/sentence\/([^\/]+)/))==null?void 0:e[1])||"")}),E(()=>t(M),()=>{a(z,`${Wt}/assets/sentence/${t(M)}`)}),E(()=>t(m),()=>{a(H,t(m)==="both"?"한글 숨기기":t(m)==="hideKor"?"영어 숨기기":"기본 보기")}),E(()=>t(f),()=>{a(J,t(f)==="eng"?"영어":t(f)==="kor"?"한국어":"모두")}),E(()=>t(i),()=>{t(i)&&mt()}),Rt(),Vt();var Y=te(),N=lt(Y),qt=n(N);{var xt=e=>{var s=Dt(),d=lt(s);rt(d,1,()=>t(v),dt,(k,_,r)=>{var y=Xt();Pt(y,"id",`s-${r}`);var tt=n(y),et=n(tt);et.textContent=`${r+1}.`;var at=c(et,2),D=n(at);let st;var At=n(D,!0);l(D);var Q=c(D,2);let ot;var Bt=n(Q,!0);l(Q),l(at),l(tt),l(y),V((Gt,Lt)=>{I(y,1,`sent ${r===t(p)?"active":""}`,"svelte-d99mqd"),st=I(D,1,"text svelte-d99mqd",null,st,Gt),u(At,t(_)),ot=I(Q,1,"kor svelte-d99mqd",null,ot,Lt),u(Bt,t(O)[r])},[()=>({large:t(q),hidden:t(m)==="hideEng"}),()=>({large:t(q),hidden:t(m)==="hideKor"})],it),b("click",y,()=>$(r)),w(k,y)}),w(e,s)},$t=e=>{var s=Yt();w(e,s)};Nt(qt,e=>{t(v).length?e(xt):e($t,!1)})}l(N);var P=c(N,2),K=n(P),wt=n(K,!0);l(K);var j=c(K,2),Et=n(j);l(j);var A=c(j,2),Mt=n(A,!0);l(A);var B=c(A,2),St=n(B,!0);l(B);var G=c(B,2),Tt=n(G,!0);l(G);var L=c(G,2),Kt=n(L);l(L);var Z=c(L,2);rt(Z,5,()=>W,dt,(e,s)=>{var d=Zt();let k;var _=n(d,!0);l(d),V(r=>{k=I(d,1,"svelte-d99mqd",null,k,r),u(_,t(s)===0?"즉시":`${t(s)/1e3}초`)},[()=>({selected:t(C)===t(s)})],it),b("click",d,()=>yt(t(s))),w(e,d)}),l(Z),l(P);var jt=c(P,2);Qt(jt,e=>a(i,e),()=>t(i)),V(()=>{u(wt,t(h)?"⏸":"▶"),u(Et,`반복:${t(S)==="one"?"한 문장":"전체"}`),u(Mt,t(q)?"기본크기":"글자 크게"),u(St,t(H)),u(Tt,t(T)?"원문 보기":"빈칸 만들기"),u(Kt,`음성:${t(J)??""}`)}),b("click",K,ft),b("click",j,_t),b("click",A,bt),b("click",B,kt),b("click",G,gt),b("click",L,ht),w(ct,Y),zt(),pt()}export{me as component};
