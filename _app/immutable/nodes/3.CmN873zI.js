import{t as q,e as x,a as N,s as u}from"../chunks/CEmPIxNJ.js";import"../chunks/By0_FFSG.js";import{h as Q,a3 as pt,a8 as U,a9 as ft,t as T,a6 as vt,a4 as f,c as n,g as t,o as d,q as a,r as o,aa as ct}from"../chunks/DKVBVOUy.js";import{i as W}from"../chunks/DVrbH2wj.js";import{e as ut,i as mt}from"../chunks/C6EYMggD.js";import{s as Y}from"../chunks/BnVpz-va.js";import{t as gt}from"../chunks/BQs9fFl7.js";import{i as bt}from"../chunks/DaaNtiuP.js";import{s as xt,a as ht}from"../chunks/CWYHwTbz.js";import{o as _t}from"../chunks/0jm4Ivcg.js";import{p as yt}from"../chunks/zWJxuMT_.js";import{b as $t}from"../chunks/D7p5Xtbb.js";function C(m,w,D,K){var z=m.__style;if(Q||z!==w){var v=gt(w);(!Q||v!==m.getAttribute("style"))&&(v==null?m.removeAttribute("style"):m.style.cssText=v),m.__style=w}return K}var wt=q('<div style="width:40%;background:#f0f0f0;display:flex;align-items:center;justify-content:center;position:relative;"><div style="position:absolute;top:10px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.3);color:#fff;padding:5px 10px;border-radius:5px;font-weight:bold;"> </div> <img style="max-width:90%;max-height:90%;border-radius:10px;"></div>'),kt=q("<div> </div>"),zt=q('<div><div style="color:#2a3d66;font-weight:bold;margin-bottom:5px;font-size:1.2em;"> </div> <div> </div> <!></div>'),St=q('<div style="position:absolute;top:50px;left:0;right:0;bottom:0;display:flex;flex-direction:column;overflow:hidden;"><div style="flex:1;display:flex;overflow:hidden;"><!> <div style="flex:1;overflow-y:auto;padding:20px;"></div></div> <div style="background:#fff;padding:10px;border-top:1px solid #ccc;display:flex;justify-content:center;gap:8px;"><button style="width:110px;height:48px;font-size:0.8em;"> </button> <button style="width:110px;height:48px;font-size:0.8em;"> </button> <button style="width:110px;height:48px;font-size:0.8em;"> </button> <button style="width:110px;height:48px;font-size:0.8em;">크기</button> <button style="width:110px;height:48px;font-size:0.8em;"> </button></div></div>');function Kt(m,w){pt(w,!1);const[D,K]=xt(),z=()=>ht(yt,"$page",D),v=d(),h=d();let c=d([]),p=d(0),l=null,_=d(!1),g=d("none"),S=d("1.2em"),A=d(!0),E=d(!0),j=d({});_t(async()=>{if(!t(v))return;const e=await fetch(`${t(h)}/dialogue.json`);if(e.ok){const r=await e.json();a(j,r.persons),a(c,r.conversation.map((i,s)=>({...i,filePath:`${t(h)}/audio/${String(s+1).padStart(2,"0")}.mp3`})))}});async function k(e){var i,s;if(e<0||e>=t(c).length){a(_,!1);return}l==null||l.pause(),a(p,e),await ct(),(i=document.getElementById(`segment-${e}`))==null||i.scrollIntoView({behavior:"smooth",block:"center"});const r=t(c)[e];l=new Audio(r.filePath),l.muted=(s=t(j)[r.speaker])==null?void 0:s.hideEnglish,l.onended=()=>{t(g)==="segment"?k(t(p)):t(p)<t(c).length-1?k(t(p)+1):t(g)==="all"?k(0):a(_,!1)},a(_,!0),l.play()}function Z(){l?l.paused?(l.play(),a(_,!0)):(l.pause(),a(_,!1)):k(0)}function tt(){a(g,t(g)==="none"?"all":t(g)==="all"?"segment":"none")}function et(e){e.target.src=`${t(h)}/ready.webp`}U(()=>z(),()=>{var e;a(v,((e=z().url.pathname.match(/\/dialogue\/([^\/]+)/))==null?void 0:e[1])||"")}),U(()=>t(v),()=>{a(h,`${$t}/assets/dialogue/${t(v)}`)}),ft(),bt();var R=St(),V=n(R),G=n(V);{var at=e=>{var r=wt(),i=n(r),s=n(i,!0);o(i);var y=f(i,2);o(r),T(()=>{var P,b,B;u(s,((b=t(j)[(P=t(c)[t(p)])==null?void 0:P.speaker])==null?void 0:b.name)||""),Y(y,"src",(B=t(c)[t(p)])!=null&&B.speaker?`${t(h)}/${t(c)[t(p)].speaker}.webp`:`${t(h)}/ready.webp`)}),x("error",y,et),N(e,r)};W(G,e=>{t(E)&&e(at)})}var H=f(G,2);ut(H,5,()=>t(c),mt,(e,r,i)=>{var s=zt();Y(s,"id",`segment-${i}`);var y=n(s),P=n(y);o(y);var b=f(y,2),B=n(b,!0);o(b);var nt=f(b,2);{var lt=$=>{var M=kt(),dt=n(M,!0);o(M),T(()=>{C(M,`font-size:${t(S)??""};color:#555;`),u(dt,t(r).korean)}),N($,M)};W(nt,$=>{t(A)&&$(lt)})}o(s),T(()=>{var $;C(s,`margin-bottom:15px;padding:10px;cursor:pointer;border-bottom:1px solid #ddd;background:${i===t(p)?"#d0f0d0":"transparent"};font-weight:${i===t(p)?"bold":"normal"};`),u(P,`${(($=t(j)[t(r).speaker])==null?void 0:$.name)??""}:`),C(b,`font-size:${t(S)??""};margin-bottom:5px;`),u(B,t(r).text)}),x("click",s,()=>k(i)),N(e,s)}),o(H),o(V);var J=f(V,2),F=n(J),ot=n(F,!0);o(F);var O=f(F,2),rt=n(O);o(O);var I=f(O,2),it=n(I,!0);o(I);var L=f(I,2),X=f(L,2),st=n(X,!0);o(X),o(J),o(R),T(()=>{u(ot,t(_)?"⏸":"▶"),u(rt,`반복:${t(g)==="none"?"없음":t(g)==="all"?"전체":"구간"}`),u(it,t(A)?"한글 ON":"한글 OFF"),u(st,t(E)?"사진 ON":"사진 OFF")}),x("click",F,Z),x("click",O,tt),x("click",I,()=>a(A,!t(A))),x("click",L,()=>a(S,t(S)==="1.2em"?"2em":"1.2em")),x("click",X,()=>a(E,!t(E))),N(m,R),vt(),K()}export{Kt as component};
